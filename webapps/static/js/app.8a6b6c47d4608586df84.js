webpackJsonp([1],{"+E5I":function(t,e){},"/u7W":function(t,e,n){"use strict";n.d(e,"a",function(){return r});var i=n("5H02"),r={List:function(t){return i.a.apiGet("/file/v1/list",{path:t||""})},Delete:function(t){return i.a.apiDelete("/file/v1/del",{path:t||""})},Rename:function(t,e){return i.a.apiPost("/file/v1/rename",{path:t||"",name:e||""})},NewFolder:function(t){return i.a.apiPost("/file/v1/newfolder",{path:t||""})},GetStreamToken:function(t,e){return i.a.apiGet("/filestream/v1/token",{type:t||"",data:e||""})},GetDownloadUrl:function(t){return r.GetStreamToken("download",t).then(function(t){return i.a.buildAPIURL(i.a.getSignAPIURL("/filestream/v1/read/"+t.token))})},GetSteamUrl:function(t){return r.GetStreamToken("download",t).then(function(t){return encodeURI(i.a.buildAPIURL("/filestream/v1/read/"+t.token,{action:"stream"}))})},GetUploadUrl:function(t){return r.GetStreamToken("upload",t).then(function(t){return i.a.buildAPIURL("/filestream/v1/put/"+t.token)})},AsyncExec:function(t,e){return e||(e={}),e.func=t,i.a.apiPost("/filetask/v1/asyncexec",e)},AsyncExecToken:function(t,e,n){return n||(n={}),n.func=t,n.token=e,i.a.apiPost("/filetask/v1/asyncexectoken",n)},CopyAsync:function(t,e,n,i){return this.AsyncExec("CopyFile",{srcPath:t||"",dstPath:e||"",replace:n||!1,ignore:i||!1})},MoveAsync:function(t,e,n,i){return this.AsyncExec("MoveFile",{srcPath:t||"",dstPath:e||"",replace:n||!1,ignore:i||!1})}}},0:function(t,e){},"0lA4":function(t,e){},"3/6Q":function(t,e){},"5H02":function(t,e,n){"use strict";n.d(e,"a",function(){return f});var i=n("mvHQ"),r=n.n(i),o=n("//Fk"),a=n.n(o),s=n("fZjL"),c=n.n(s),u=n("mF0L"),l=n("zIZW"),d=(n.n(l),n("mP1F")),h=n.n(d),f={_Const:{ack:"access_object",host:"access_host",hosturi:localStorage.getItem("access_host")},setAPIHost:function(t){t&&t.length>0?(localStorage.setItem(this._Const.host,t),this._Const.hosturi=t):localStorage.removeItem(this._Const.host)},getAPIHost:function(){return this._Const.hosturi?this._Const.hosturi:""},buildAPIURL:function(t,e){var n=this._Const.hosturi?this._Const.hosturi+t:window.location.origin+t;if(e){for(var i=[],r=c()(e),o=0;o<r.length;o++)void 0!==e[r[o]]&&i.push(r[o]+"="+encodeURIComponent(e[r[o]]));n=n+"?"+i.join("&")}return n},getSignAPIURL:function(t,e){e||(e={});var n=this.getSession();if(n&&n.secretKey&&n.accessKey){var i={};for(var r in e)void 0!=e[r]&&null!=e[r]&&0!=e[r].length&&(i[r]=e[r]);var o=[],a=[],s=c()(i);if(s.length>0){s=s.sort();for(var u=0;u<s.length;u++){var l=i[s[u]];o.push(s[u]+"="+l),a.push(s[u]+"="+encodeURIComponent(l))}}return o.length>0?t+"?"+a.join("&")+"&x-Ack="+n.accessKey+"&X-Sign="+h()(o.join("&")+n.secretKey):t+"?x-Ack="+n.accessKey+"&X-Sign="+h()(n.secretKey)}this.apiResponseStautsHandler({code:401})},apiRequest:function(t){var e=this.getSession();if(t.session=e,e&&e.secretKey&&e.accessKey){this._Const.hosturi&&this._Const.hosturi.length>0&&(t.uri.startWith("http://")||t.uri.startWith("https://")||(t.uri=this._Const.hosturi+t.uri));var n=u.a.AjaxRequest(t),i=n.payload.payload;return i&&i.length>0?i+=t.session.secretKey:i=t.session.secretKey,n.setHeader("X-Ack",e.accessKey),n.setHeader("X-Sign",h()(i)),n}this.apiResponseStautsHandler({code:401})},apiResponseFormat:function(t){var e={code:0,data:""},n={};if(void 0!=t.responseText)if(u.a.isString(t.responseText))try{n=JSON.parse(t.responseText)}catch(e){n=t.responseText}else n=t.responseText;return void 0==n.code&&void 0==n.data?(e.code=t.status,e.data=n):(e.code=void 0==n.code?t.status:n.code,e.data=void 0==n.data?"":n.data),this.apiResponseStautsHandler(e),e},apiResponseStautsHandler:function(t){t&&(401==t.code?(t.data="登录过期,请刷新页面",(top.location||window.location).href="/"):403==t.code&&(t.data="请求被禁止,可能是权限不足"))},apiGet:function(t,e){var n=this;return new a.a(function(i,r){n.apiRequest({uri:t,datas:e}).do(function(t,e){if(4===t.readyState){var o=n.apiResponseFormat(t);200===o.code?i(o.data):r(o.data)}})})},apiPost:function(t,e){var n=this;return new a.a(function(i,r){n.apiRequest({uri:t,method:"POST",datas:e}).do(function(t,e){if(4===t.readyState){var o=n.apiResponseFormat(t);200===o.code?i(o.data):r(o.data)}})})},apiPostSync:function(t,e){var n=this;return this.apiRequest({uri:t,method:"POST",datas:e,async:!1}).do(function(t,e){if(4===t.readyState){var i=n.apiResponseFormat(t);if(200===i.code)return i.data;throw i.data}})},apiDelete:function(t,e){var n=this;return new a.a(function(i,r){n.apiRequest({uri:t,method:"DELETE",datas:e}).do(function(t,e){if(4===t.readyState){var o=n.apiResponseFormat(t);200===o.code?i(o.data):r(o.data)}})})},apiDeleteSync:function(t,e){var n=this;return this.apiRequest({uri:t,method:"DELETE",datas:e,async:!1}).do(function(t,e){if(4===t.readyState){var i=n.apiResponseFormat(t);if(200===i.code)return i.data;throw i.data}})},saveSession:function(t){localStorage.setItem(this._Const.ack,""),t&&t.accessKey&&(localStorage.setItem(this._Const.ack,r()(t)),u.a.setCookie("X-Ack",t.accessKey))},getSession:function(){try{return JSON.parse(localStorage.getItem(this._Const.ack))}catch(t){return{}}},destroySession:function(){localStorage.setItem(this._Const.ack,""),u.a.setCookie("X-Ack","")}}},"7M5M":function(t,e){},"7QVd":function(t,e){},"9a7g":function(t,e){},CjfL:function(t,e){},KXTU:function(t,e,n){"use strict";(function(t,e,i,r){var o,a=n("Zx67"),s=n.n(a),c=n("kiBT"),u=n.n(c),l=n("Zzip"),d=n.n(l),h=n("5QVw"),f=n.n(h),p=n("pQ2V"),g=n.n(p),m=n("OvRC"),v=n.n(m),y=n("pFYg"),_=n.n(y),w=n("C4MV"),S=n.n(w),b=n("HSQo"),x=n.n(b),D=D||{};D.scope={},D.ASSUME_ES5=!1,D.ASSUME_NO_NATIVE_MAP=!1,D.ASSUME_NO_NATIVE_SET=!1,D.defineProperty=D.ASSUME_ES5||"function"==typeof x.a?S.a:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},D.getGlobal=function(e){return"undefined"!=typeof window&&window===e?e:void 0!==t&&null!=t?t:e},D.global=D.getGlobal(this),D.polyfill=function(t,e,n,i){if(e){for(n=D.global,t=t.split("."),i=0;i<t.length-1;i++){var r=t[i];r in n||(n[r]={}),n=n[r]}(e=e(i=n[t=t[t.length-1]]))!=i&&null!=e&&D.defineProperty(n,t,{configurable:!0,writable:!0,value:e})}},D.polyfill("Object.setPrototypeOf",function(t){return t||("object"!=_()("".__proto__)?null:function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t})},"es6","es5"),D.objectCreate=D.ASSUME_ES5||"function"==typeof v.a?v.a:function(t){var e=function(){};return e.prototype=t,new e},D.construct="undefined"!=typeof Reflect&&g.a||function(t,e,n){return void 0===n&&(n=t),n=D.objectCreate(n.prototype||Object.prototype),Function.prototype.apply.call(t,n,e)||n},D.polyfill("Reflect.construct",function(t){return t||D.construct},"es6","es3"),function(e){"object"===("undefined"==typeof exports?"undefined":_()(exports))&&void 0!==r?r.exports=e():"function"==typeof define&&n("nErl")?define([],e):("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:this).jsmediatags=e()}(function(){return function(){return function t(e,n,i){function r(s,c){if(!n[s]){if(!e[s]){if(!c&&"function"==typeof o&&o)return o(s,!0);if(a)return a(s,!0);throw(c=Error("Cannot find module '"+s+"'")).code="MODULE_NOT_FOUND",c}c=n[s]={exports:{}},e[s][0].call(c.exports,function(t){return r(e[s][1][t]||t)},c,c.exports,t,e,n,i)}return n[s].exports}for(var a="function"==typeof o&&o,s=0;s<i.length;s++)r(i[s]);return r}}()({1:[function(t,e,n){},{}],2:[function(t,e,n){e.exports=XMLHttpRequest},{}],3:[function(t,n,i){function r(t){"@babel/helpers - typeof";return(r="function"==typeof f.a&&"symbol"===_()(d.a)?function(t){return void 0===t?"undefined":_()(t)}:function(t){return t&&"function"==typeof f.a&&t.constructor===f.a&&t!==f.a.prototype?"symbol":void 0===t?"undefined":_()(t)})(t)}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function a(t,e){return(a=u.a||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!g.a||g.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(g()(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n=h(t);if(e){var i=h(this).constructor;n=g()(n,arguments,i)}else n=n.apply(this,arguments);return n=!n||"object"!==r(n)&&"function"!=typeof n?l(this):n}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=u.a?s.a:function(t){return t.__proto__||s()(t)})(t)}function p(t,e,n){return e in t?S()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t=function(n){function i(t){if(!(this instanceof i))throw new TypeError("Cannot call a class as a function");var e=r.call(this);return p(l(e),"_array",void 0),p(l(e),"_size",void 0),e._array=t,e._size=t.length,e._isInitialized=!0,e}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=v()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}(i,t("./MediaFileReader"));var r=c(i);return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(i,[{key:"init",value:function(t){setTimeout(t.onSuccess,0)}},{key:"loadRange",value:function(t,e){setTimeout(e.onSuccess,0)}},{key:"getByteAt",value:function(t){if(t>=this._array.length)throw Error("Offset "+t+" hasn't been loaded yet.");return this._array[t]}}],[{key:"canReadFile",value:function(t){return Array.isArray(t)||"function"==typeof e&&e.isBuffer(t)}}]),i}(),n.exports=t},{"./MediaFileReader":11}],4:[function(t,e,n){function i(t){"@babel/helpers - typeof";return(i="function"==typeof f.a&&"symbol"===_()(d.a)?function(t){return void 0===t?"undefined":_()(t)}:function(t){return t&&"function"==typeof f.a&&t.constructor===f.a&&t!==f.a.prototype?"symbol":void 0===t?"undefined":_()(t)})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function o(t,e){return(o=u.a||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!g.a||g.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(g()(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n=l(t);if(e){var r=l(this).constructor;n=g()(n,arguments,r)}else n=n.apply(this,arguments);return n=!n||"object"!==i(n)&&"function"!=typeof n?c(this):n}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=u.a?s.a:function(t){return t.__proto__||s()(t)})(t)}function h(t,e,n){return e in t?S()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=t("./ChunkedFileData");t=function(e){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var e=i.call(this);return h(c(e),"_blob",void 0),h(c(e),"_fileData",void 0),e._blob=t,e._fileData=new p,e}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=v()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,t("./MediaFileReader"));var i=a(n);return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(n,[{key:"_init",value:function(t){this._size=this._blob.size,setTimeout(t.onSuccess,1)}},{key:"loadRange",value:function(t,e){var n=this,i=(this._blob.slice||this._blob.mozSlice||this._blob.webkitSlice).call(this._blob,t[0],t[1]+1),r=new FileReader;r.onloadend=function(i){i=new Uint8Array(r.result),n._fileData.addData(t[0],i),e.onSuccess()},r.onerror=r.onabort=function(t){e.onError&&e.onError({type:"blob",info:r.error})},r.readAsArrayBuffer(i)}},{key:"getByteAt",value:function(t){return this._fileData.getByteAt(t)}}],[{key:"canReadFile",value:function(t){return"undefined"!=typeof Blob&&t instanceof Blob||"undefined"!=typeof File&&t instanceof File}}]),n}(),e.exports=t},{"./ChunkedFileData":5,"./MediaFileReader":11}],5:[function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");"_fileData"in this?Object.defineProperty(this,"_fileData",{value:void 0,enumerable:!0,configurable:!0,writable:!0}):this._fileData=void 0,this._fileData=[]}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"addData",value:function(t,e){var n=t+e.length-1,i=this._getChunkRange(t,n);if(-1===i.startIx)this._fileData.splice(i.insertIx||0,0,{offset:t,data:e});else{var r=this._fileData[i.startIx],o=this._fileData[i.endIx];n=n<o.offset+o.data.length-1;var a={offset:Math.min(t,r.offset),data:e};t>r.offset&&(t=this._sliceData(r.data,0,t-r.offset),a.data=this._concatData(t,e)),n&&(t=this._sliceData(a.data,0,o.offset-a.offset),a.data=this._concatData(t,o.data)),this._fileData.splice(i.startIx,i.endIx-i.startIx+1,a)}}},{key:"_concatData",value:function(t,e){if("undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t)){var n=new t.constructor(t.length+e.length);return n.set(t,0),n.set(e,t.length),n}return t.concat(e)}},{key:"_sliceData",value:function(t,e,n){return t.slice?t.slice(e,n):t.subarray(e,n)}},{key:"_getChunkRange",value:function(t,e){for(var n,i,r=-1,o=-1,a=0,s=0;s<this._fileData.length&&(n=(i=this._fileData[s].offset)+this._fileData[s].data.length,!(e<i-1));a=++s)if(t<=n+1&&e>=i-1){r=s;break}if(-1===r)return{startIx:-1,endIx:-1,insertIx:a};for(s=r;s<this._fileData.length&&(n=(i=this._fileData[s].offset)+this._fileData[s].data.length,e>=i-1&&(o=s),!(e<=n+1));s++);return-1===o&&(o=r),{startIx:r,endIx:o}}},{key:"hasDataRange",value:function(t,e){for(var n=0;n<this._fileData.length;n++){var i=this._fileData[n];if(e<i.offset)break;if(t>=i.offset&&e<i.offset+i.data.length)return!0}return!1}},{key:"getByteAt",value:function(t){for(var e,n=0;n<this._fileData.length;n++){var i=this._fileData[n].offset,r=i+this._fileData[n].data.length-1;if(t>=i&&t<=r){e=this._fileData[n];break}}if(e)return e.data[t-e.offset];throw Error("Offset "+t+" hasn't been loaded yet.")}}],[{key:"NOT_FOUND",get:function(){return-1}}]),t}(),e.exports=t},{}],6:[function(t,e,n){function i(t){"@babel/helpers - typeof";return(i="function"==typeof f.a&&"symbol"===_()(d.a)?function(t){return void 0===t?"undefined":_()(t)}:function(t){return t&&"function"==typeof f.a&&t.constructor===f.a&&t!==f.a.prototype?"symbol":void 0===t?"undefined":_()(t)})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function o(t,e){return(o=u.a||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!g.a||g.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(g()(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n=l(t);if(e){var r=l(this).constructor;n=g()(n,arguments,r)}else n=n.apply(this,arguments);return n=!n||"object"!==i(n)&&"function"!=typeof n?c(this):n}}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=u.a?s.a:function(t){return t.__proto__||s()(t)})(t)}function h(t,e,n){return e in t?S()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var p=[4,132],m=[6,134],y="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");t=function(e){function n(){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];return h(c(t=i.call.apply(i,[this].concat(e))),"_commentOffset",void 0),h(c(t),"_pictureOffset",void 0),t}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=v()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(n,t("./MediaTagReader"));var i=a(n);return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(n,[{key:"_loadData",value:function(t,e){var n=this;t.loadRange([4,7],{onSuccess:function(){n._loadBlock(t,4,e)}})}},{key:"_loadBlock",value:function(t,e,n){var i=this,r=t.getByteAt(e),o=t.getInteger24At(e+1,!0);if(-1!==p.indexOf(r)){var a=e+4;t.loadRange([a,a+o],{onSuccess:function(){i._commentOffset=a,i._nextBlock(t,e,r,o,n)}})}else-1!==m.indexOf(r)?(a=e+4,t.loadRange([a,a+o],{onSuccess:function(){i._pictureOffset=a,i._nextBlock(t,e,r,o,n)}})):i._nextBlock(t,e,r,o,n)}},{key:"_nextBlock",value:function(t,e,n,i,r){var o=this;127<n?o._commentOffset?r.onSuccess():r.onError({type:"loadData",info:"Comment block could not be found."}):t.loadRange([e+4+i,e+4+4+i],{onSuccess:function(){o._loadBlock(t,e+4+i,r)}})}},{key:"_parseData",value:function(t,e){var n=t.getLongAt(this._commentOffset,!1)+(this._commentOffset+4);e=t.getLongAt(n,!1),n+=4;for(var i,r,o,a,s,c,u=0;u<e;u++){var l=t.getLongAt(n,!1),d=t.getStringWithCharsetAt(n+4,l,"utf-8").toString(),h=d.indexOf("=");switch((d=[d.slice(0,h),d.slice(h+1)])[0].toUpperCase()){case"TITLE":i=d[1];break;case"ARTIST":r=d[1];break;case"ALBUM":o=d[1];break;case"TRACKNUMBER":a=d[1];break;case"GENRE":s=d[1]}n+=4+l}return this._pictureOffset&&(c=t.getLongAt(this._pictureOffset,!0),e=this._pictureOffset+4,n=t.getLongAt(e,!0),u=e+4,e=t.getStringAt(u,n),n=u+n,u=t.getLongAt(n,!0),l=n+4,n=t.getStringWithCharsetAt(l,u,"utf-8").toString(),u=l+u+16,l=t.getLongAt(u,!0),t=t.getBytesAt(u+4,l,!0),c={format:e,type:y[c],description:n,data:t}),{type:"FLAC",version:"1",tags:{title:i,artist:r,album:o,track:a,genre:s,picture:c}}}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:4}}},{key:"canReadTagFormat",value:function(t){return"fLaC"===String.fromCharCode.apply(String,t.slice(0,4))}}]),n}(),e.exports=t},{"./MediaTagReader":12}],7:[function(t,e,n){function i(t){"@babel/helpers - typeof";return(i="function"==typeof f.a&&"symbol"===_()(d.a)?function(t){return void 0===t?"undefined":_()(t)}:function(t){return t&&"function"==typeof f.a&&t.constructor===f.a&&t!==f.a.prototype?"symbol":void 0===t?"undefined":_()(t)})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function o(t,e){return(o=u.a||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!g.a||g.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(g()(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n=c(t);if(e){var r=c(this).constructor;n=g()(n,arguments,r)}else n=n.apply(this,arguments);if(!n||"object"!==i(n)&&"function"!=typeof n){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");n=this}return n}}function c(t){return(c=u.a?s.a:function(t){return t.__proto__||s()(t)})(t)}n=t("./MediaTagReader"),t("./MediaFileReader"),t=function(t){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");return i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=v()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,n);var i=a(e);return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"_loadData",value:function(t,e){var n=t.getSize();t.loadRange([n-128,n-1],e)}},{key:"_parseData",value:function(t,e){var n=t.getSize()-128,i=t.getStringWithCharsetAt(n+3,30).toString(),r=t.getStringWithCharsetAt(n+33,30).toString(),o=t.getStringWithCharsetAt(n+63,30).toString(),a=t.getStringWithCharsetAt(n+93,4).toString(),s=t.getByteAt(n+97+28);if(e=t.getByteAt(n+97+29),0==s&&0!=e){var c="1.1";s=t.getStringWithCharsetAt(n+97,28).toString()}else c="1.0",s=t.getStringWithCharsetAt(n+97,30).toString(),e=0;return t={type:"ID3",version:c,tags:{title:i,artist:r,album:o,year:a,comment:s,genre:255>(t=t.getByteAt(n+97+30))?l[t]:""}},e&&(t.tags.track=e),t}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:-128,length:128}}},{key:"canReadTagFormat",value:function(t){return"TAG"===String.fromCharCode.apply(String,t.slice(0,3))}}]),e}();var l="Blues;Classic Rock;Country;Dance;Disco;Funk;Grunge;Hip-Hop;Jazz;Metal;New Age;Oldies;Other;Pop;R&B;Rap;Reggae;Rock;Techno;Industrial;Alternative;Ska;Death Metal;Pranks;Soundtrack;Euro-Techno;Ambient;Trip-Hop;Vocal;Jazz+Funk;Fusion;Trance;Classical;Instrumental;Acid;House;Game;Sound Clip;Gospel;Noise;AlternRock;Bass;Soul;Punk;Space;Meditative;Instrumental Pop;Instrumental Rock;Ethnic;Gothic;Darkwave;Techno-Industrial;Electronic;Pop-Folk;Eurodance;Dream;Southern Rock;Comedy;Cult;Gangsta;Top 40;Christian Rap;Pop/Funk;Jungle;Native American;Cabaret;New Wave;Psychadelic;Rave;Showtunes;Trailer;Lo-Fi;Tribal;Acid Punk;Acid Jazz;Polka;Retro;Musical;Rock & Roll;Hard Rock;Folk;Folk-Rock;National Folk;Swing;Fast Fusion;Bebob;Latin;Revival;Celtic;Bluegrass;Avantgarde;Gothic Rock;Progressive Rock;Psychedelic Rock;Symphonic Rock;Slow Rock;Big Band;Chorus;Easy Listening;Acoustic;Humour;Speech;Chanson;Opera;Chamber Music;Sonata;Symphony;Booty Bass;Primus;Porn Groove;Satire;Slow Jam;Club;Tango;Samba;Folklore;Ballad;Power Ballad;Rhythmic Soul;Freestyle;Duet;Punk Rock;Drum Solo;Acapella;Euro-House;Dance Hall".split(";");e.exports=t},{"./MediaFileReader":11,"./MediaTagReader":12}],8:[function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function r(t){switch(t){case 0:t="iso-8859-1";break;case 1:t="utf-16";break;case 2:t="utf-16be";break;case 3:t="utf-8";break;default:t="iso-8859-1"}return t}function o(t,e,n,i){var r=n.getStringWithCharsetAt(t+1,e-1,i);return t=n.getStringWithCharsetAt(t+1+r.bytesReadCount,e-1-r.bytesReadCount,i),{user_description:r.toString(),data:t.toString()}}t("./MediaFileReader");var a=t("./StringUtils"),s=t("./ArrayFileReader"),c={BUF:"Recommended buffer size",CNT:"Play counter",COM:"Comments",CRA:"Audio encryption",CRM:"Encrypted meta frame",ETC:"Event timing codes",EQU:"Equalization",GEO:"General encapsulated object",IPL:"Involved people list",LNK:"Linked information",MCI:"Music CD Identifier",MLL:"MPEG location lookup table",PIC:"Attached picture",POP:"Popularimeter",REV:"Reverb",RVA:"Relative volume adjustment",SLT:"Synchronized lyric/text",STC:"Synced tempo codes",TAL:"Album/Movie/Show title",TBP:"BPM (Beats Per Minute)",TCM:"Composer",TCO:"Content type",TCR:"Copyright message",TDA:"Date",TDY:"Playlist delay",TEN:"Encoded by",TFT:"File type",TIM:"Time",TKE:"Initial key",TLA:"Language(s)",TLE:"Length",TMT:"Media type",TOA:"Original artist(s)/performer(s)",TOF:"Original filename",TOL:"Original Lyricist(s)/text writer(s)",TOR:"Original release year",TOT:"Original album/Movie/Show title",TP1:"Lead artist(s)/Lead performer(s)/Soloist(s)/Performing group",TP2:"Band/Orchestra/Accompaniment",TP3:"Conductor/Performer refinement",TP4:"Interpreted, remixed, or otherwise modified by",TPA:"Part of a set",TPB:"Publisher",TRC:"ISRC (International Standard Recording Code)",TRD:"Recording dates",TRK:"Track number/Position in set",TSI:"Size",TSS:"Software/hardware and settings used for encoding",TT1:"Content group description",TT2:"Title/Songname/Content description",TT3:"Subtitle/Description refinement",TXT:"Lyricist/text writer",TXX:"User defined text information frame",TYE:"Year",UFI:"Unique file identifier",ULT:"Unsychronized lyric/text transcription",WAF:"Official audio file webpage",WAR:"Official artist/performer webpage",WAS:"Official audio source webpage",WCM:"Commercial information",WCP:"Copyright/Legal information",WPB:"Publishers official webpage",WXX:"User defined URL link frame",AENC:"Audio encryption",APIC:"Attached picture",ASPI:"Audio seek point index",CHAP:"Chapter",CTOC:"Table of contents",COMM:"Comments",COMR:"Commercial frame",ENCR:"Encryption method registration",EQU2:"Equalisation (2)",EQUA:"Equalization",ETCO:"Event timing codes",GEOB:"General encapsulated object",GRID:"Group identification registration",IPLS:"Involved people list",LINK:"Linked information",MCDI:"Music CD identifier",MLLT:"MPEG location lookup table",OWNE:"Ownership frame",PRIV:"Private frame",PCNT:"Play counter",POPM:"Popularimeter",POSS:"Position synchronisation frame",RBUF:"Recommended buffer size",RVA2:"Relative volume adjustment (2)",RVAD:"Relative volume adjustment",RVRB:"Reverb",SEEK:"Seek frame",SYLT:"Synchronized lyric/text",SYTC:"Synchronized tempo codes",TALB:"Album/Movie/Show title",TBPM:"BPM (beats per minute)",TCOM:"Composer",TCON:"Content type",TCOP:"Copyright message",TDAT:"Date",TDLY:"Playlist delay",TDRC:"Recording time",TDRL:"Release time",TDTG:"Tagging time",TENC:"Encoded by",TEXT:"Lyricist/Text writer",TFLT:"File type",TIME:"Time",TIPL:"Involved people list",TIT1:"Content group description",TIT2:"Title/songname/content description",TIT3:"Subtitle/Description refinement",TKEY:"Initial key",TLAN:"Language(s)",TLEN:"Length",TMCL:"Musician credits list",TMED:"Media type",TMOO:"Mood",TOAL:"Original album/movie/show title",TOFN:"Original filename",TOLY:"Original lyricist(s)/text writer(s)",TOPE:"Original artist(s)/performer(s)",TORY:"Original release year",TOWN:"File owner/licensee",TPE1:"Lead performer(s)/Soloist(s)",TPE2:"Band/orchestra/accompaniment",TPE3:"Conductor/performer refinement",TPE4:"Interpreted, remixed, or otherwise modified by",TPOS:"Part of a set",TPRO:"Produced notice",TPUB:"Publisher",TRCK:"Track number/Position in set",TRDA:"Recording dates",TRSN:"Internet radio station name",TRSO:"Internet radio station owner",TSOA:"Album sort order",TSOP:"Performer sort order",TSOT:"Title sort order",TSIZ:"Size",TSRC:"ISRC (international standard recording code)",TSSE:"Software/Hardware and settings used for encoding",TSST:"Set subtitle",TYER:"Year",TXXX:"User defined text information frame",UFID:"Unique file identifier",USER:"Terms of use",USLT:"Unsychronized lyric/text transcription",WCOM:"Commercial information",WCOP:"Copyright/Legal information",WOAF:"Official audio file webpage",WOAR:"Official artist/performer webpage",WOAS:"Official audio source webpage",WORS:"Official internet radio station homepage",WPAY:"Payment",WPUB:"Publishers official webpage",WXXX:"User defined URL link frame"};t=function(){function t(){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function")}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,null,[{key:"getFrameReaderFunction",value:function(t){return t in u?u[t]:"T"===t[0]?u["T*"]:"W"===t[0]?u["W*"]:null}},{key:"readFrames",value:function(e,n,i,r,o){for(var a={},s=this._getFrameHeaderSize(r);e<n-s;){var c=this._readFrameHeader(i,e,r),u=c.id;if(!u)break;var l=c.flags,d=c.size,h=e+c.headerSize,f=i;if(e+=c.headerSize+c.size,!o||-1!==o.indexOf(u)){if("MP3e"===u||"\0MP3"===u||"\0\0MP"===u||" MP3"===u)break;l&&l.format.unsynchronisation&&!r.flags.unsynchronisation&&(f=this.getUnsyncFileReader(f,h,d),h=0,d=f.getSize()),l&&l.format.data_length_indicator&&(h+=4,d-=4),l=(c=t.getFrameReaderFunction(u))?c.apply(this,[h,d,f,l,r]):null,d={id:u,size:d,description:h=this._getFrameDescription(u),data:l},u in a?(a[u].id&&(a[u]=[a[u]]),a[u].push(d)):a[u]=d}}return a}},{key:"_getFrameHeaderSize",value:function(t){return 2==(t=t.major)?6:3==t||4==t?10:0}},{key:"_readFrameHeader",value:function(t,e,n){var i=n.major,r=null;switch(n=this._getFrameHeaderSize(n),i){case 2:var o=t.getStringAt(e,3),a=t.getInteger24At(e+3,!0);break;case 3:o=t.getStringAt(e,4),a=t.getLongAt(e+4,!0);break;case 4:o=t.getStringAt(e,4),a=t.getSynchsafeInteger32At(e+4)}return o!=String.fromCharCode(0,0,0)&&o!=String.fromCharCode(0,0,0,0)||(o=""),o&&2<i&&(r=this._readFrameFlags(t,e+8)),{id:o||"",size:a||0,headerSize:n||0,flags:r}}},{key:"_readFrameFlags",value:function(t,e){return{message:{tag_alter_preservation:t.isBitSetAt(e,6),file_alter_preservation:t.isBitSetAt(e,5),read_only:t.isBitSetAt(e,4)},format:{grouping_identity:t.isBitSetAt(e+1,7),compression:t.isBitSetAt(e+1,3),encryption:t.isBitSetAt(e+1,2),unsynchronisation:t.isBitSetAt(e+1,1),data_length_indicator:t.isBitSetAt(e+1,0)}}}},{key:"_getFrameDescription",value:function(t){return t in c?c[t]:"Unknown"}},{key:"getUnsyncFileReader",value:function(t,e,n){for(t=t.getBytesAt(e,n),e=0;e<t.length-1;e++)255===t[e]&&0===t[e+1]&&t.splice(e+1,1);return new s(t)}}]),t}();var u={APIC:function(t,e,n,i,o){i=t;var a=r(n.getByteAt(t));switch(o&&o.major){case 2:o=n.getStringAt(t+1,3),t+=4;break;case 3:case 4:t+=1+(o=n.getStringWithCharsetAt(t+1,e-1)).bytesReadCount;break;default:throw Error("Couldn't read ID3v2 major version.")}var s=n.getByteAt(t);return s=l[s],t+=1+(a=n.getStringWithCharsetAt(t+1,e-(t-i)-1,a)).bytesReadCount,{format:o.toString(),type:s,description:a.toString(),data:n.getBytesAt(t,i+e-t)}},CHAP:function(t,e,n,i,r){i=t;var o={},s=a.readNullTerminatedString(n.getBytesAt(t,e));return o.id=s.toString(),t+=s.bytesReadCount,o.startTime=n.getLongAt(t,!0),t+=4,o.endTime=n.getLongAt(t,!0),t+=4,o.startOffset=n.getLongAt(t,!0),t+=4,o.endOffset=n.getLongAt(t,!0),t+=4,o.subFrames=this.readFrames(t,t+(e-(t-i)),n,r),o},CTOC:function(t,e,n,i,r){i=t;var o={childElementIds:[],id:void 0,topLevel:void 0,ordered:void 0,entryCount:void 0,subFrames:void 0},s=a.readNullTerminatedString(n.getBytesAt(t,e));for(o.id=s.toString(),t+=s.bytesReadCount,o.topLevel=n.isBitSetAt(t,1),o.ordered=n.isBitSetAt(t,0),t++,o.entryCount=n.getByteAt(t),t++,s=0;s<o.entryCount;s++){var c=a.readNullTerminatedString(n.getBytesAt(t,e-(t-i)));o.childElementIds.push(c.toString()),t+=c.bytesReadCount}return o.subFrames=this.readFrames(t,t+(e-(t-i)),n,r),o},COMM:function(t,e,n,i,o){var a=t,s=r(n.getByteAt(t));return i=n.getStringAt(t+1,3),t+=4+(o=n.getStringWithCharsetAt(t+4,e-4,s)).bytesReadCount,t=n.getStringWithCharsetAt(t,a+e-t,s),{language:i,short_description:o.toString(),text:t.toString()}}};u.COM=u.COMM,u.PIC=function(t,e,n,i,r){return u.APIC(t,e,n,i,r)},u.PCNT=function(t,e,n,i,r){return n.getLongAt(t,!1)},u.CNT=u.PCNT,u["T*"]=function(t,e,n,i,o){return i=r(n.getByteAt(t)),n.getStringWithCharsetAt(t+1,e-1,i).toString()},u.TXXX=function(t,e,n,i,a){return o(t,e,n,r(n.getByteAt(t)))},u.WXXX=function(t,e,n,i,a){return 0===e?null:o(t,e,n,r(n.getByteAt(t)))},u["W*"]=function(t,e,n,i,r){return 0===e?null:n.getStringWithCharsetAt(t,e,"iso-8859-1").toString()},u.TCON=function(t,e,n,i){return u["T*"].apply(this,arguments).replace(/^\(\d+\)/,"")},u.TCO=u.TCON,u.USLT=function(t,e,n,i,o){var a=t,s=r(n.getByteAt(t));return i=n.getStringAt(t+1,3),t+=4+(o=n.getStringWithCharsetAt(t+4,e-4,s)).bytesReadCount,t=n.getStringWithCharsetAt(t,a+e-t,s),{language:i,descriptor:o.toString(),lyrics:t.toString()}},u.ULT=u.USLT,u.UFID=function(t,e,n,i,r){return t+=(i=a.readNullTerminatedString(n.getBytesAt(t,e))).bytesReadCount,t=n.getBytesAt(t,e-i.bytesReadCount),{ownerIdentifier:i.toString(),identifier:t}};var l="Other;32x32 pixels 'file icon' (PNG only);Other file icon;Cover (front);Cover (back);Leaflet page;Media (e.g. label side of CD);Lead artist/lead performer/soloist;Artist/performer;Conductor;Band/Orchestra;Composer;Lyricist/text writer;Recording Location;During recording;During performance;Movie/video screen capture;A bright coloured fish;Illustration;Band/artist logotype;Publisher/Studio logotype".split(";");e.exports=t},{"./ArrayFileReader":3,"./MediaFileReader":11,"./StringUtils":13}],9:[function(t,e,n){function i(t){"@babel/helpers - typeof";return(i="function"==typeof f.a&&"symbol"===_()(d.a)?function(t){return void 0===t?"undefined":_()(t)}:function(t){return t&&"function"==typeof f.a&&t.constructor===f.a&&t!==f.a.prototype?"symbol":void 0===t?"undefined":_()(t)})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function o(t,e){return(o=u.a||function(t,e){return t.__proto__=e,t})(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!g.a||g.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(g()(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n=c(t);if(e){var r=c(this).constructor;n=g()(n,arguments,r)}else n=n.apply(this,arguments);if(!n||"object"!==i(n)&&"function"!=typeof n){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");n=this}return n}}function c(t){return(c=u.a?s.a:function(t){return t.__proto__||s()(t)})(t)}n=t("./MediaTagReader"),t("./MediaFileReader");var l=t("./ID3v2FrameReader");t=function(t){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");return i.apply(this,arguments)}!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=v()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&o(t,e)}(e,n);var i=a(e);return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"_loadData",value:function(t,e){t.loadRange([6,9],{onSuccess:function(){t.loadRange([0,10+t.getSynchsafeInteger32At(6)-1],e)},onError:e.onError})}},{key:"_parseData",value:function(t,e){var n,i=0,r=t.getByteAt(i+3);if(4<r)return{type:"ID3",version:">2.4",tags:{}};var o=t.getByteAt(i+4),a=t.isBitSetAt(i+5,7),s=t.isBitSetAt(i+5,6),c=t.isBitSetAt(i+5,5),u=t.getSynchsafeInteger32At(i+6);if(i+=10,s)if(4===r){var d=t.getSynchsafeInteger32At(i);i+=d}else i+=(d=t.getLongAt(i,!0))+4;for(var f in d={type:"ID3",version:"2."+r+"."+o,major:r,revision:o,flags:{unsynchronisation:a,extended_header:s,experimental_indicator:c,footer_present:!1},size:u,tags:{}},e&&(n=this._expandShortcutTags(e)),e=u+10,d.flags.unsynchronisation&&(t=l.getUnsyncFileReader(t,i,u),i=0,e=t.getSize()),t=l.readFrames(i,e,t,d,n),h)h.hasOwnProperty(f)&&(n=this._getFrameData(t,h[f]))&&(d.tags[f]=n);for(var p in t)t.hasOwnProperty(p)&&(d.tags[p]=t[p]);return d}},{key:"_getFrameData",value:function(t,e){for(var n,i=0;n=e[i];i++)if(n in t)return(t=t[n]instanceof Array?t[n][0]:t[n]).data}},{key:"getShortcuts",value:function(){return h}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:10}}},{key:"canReadTagFormat",value:function(t){return"ID3"===String.fromCharCode.apply(String,t.slice(0,3))}}]),e}();var h={title:["TIT2","TT2"],artist:["TPE1","TP1"],album:["TALB","TAL"],year:["TYER","TYE"],comment:["COMM","COM"],track:["TRCK","TRK"],genre:["TCON","TCO"],picture:["APIC","PIC"],lyrics:["USLT","ULT"]};e.exports=t},{"./ID3v2FrameReader":8,"./MediaFileReader":11,"./MediaTagReader":12}],10:[function(t,e,n){function i(t){"@babel/helpers - typeof";return(i="function"==typeof f.a&&"symbol"===_()(d.a)?function(t){return void 0===t?"undefined":_()(t)}:function(t){return t&&"function"==typeof f.a&&t.constructor===f.a&&t!==f.a.prototype?"symbol":void 0===t?"undefined":_()(t)})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=v()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=u.a||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!g.a||g.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(g()(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n=l(t);if(e){var r=l(this).constructor;n=g()(n,arguments,r)}else n=n.apply(this,arguments);if(!n||"object"!==i(n)&&"function"!=typeof n){if(void 0===this)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");n=this}return n}}function l(t){return(l=u.a?s.a:function(t){return t.__proto__||s()(t)})(t)}n=t("./MediaTagReader"),t("./MediaFileReader"),t=function(t){function e(){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function");return i.apply(this,arguments)}o(e,n);var i=c(e);return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"_loadData",value:function(t,e){var n=this;t.loadRange([0,16],{onSuccess:function(){n._loadAtom(t,0,"",e)},onError:e.onError})}},{key:"_loadAtom",value:function(t,e,n,i){if(e>=t.getSize())i.onSuccess();else{var r=this,o=t.getLongAt(e,!0);if(0==o||isNaN(o))i.onSuccess();else{var a=t.getStringAt(e+4,4);if(this._isContainerAtom(a)){"meta"==a&&(e+=4);var s=(n?n+".":"")+a;"moov.udta.meta.ilst"===s?t.loadRange([e,e+o],i):t.loadRange([e+8,e+8+8],{onSuccess:function(){r._loadAtom(t,e+8,s,i)},onError:i.onError})}else t.loadRange([e+o,e+o+8],{onSuccess:function(){r._loadAtom(t,e+o,n,i)},onError:i.onError})}}}},{key:"_isContainerAtom",value:function(t){return 0<=["moov","udta","meta","ilst"].indexOf(t)}},{key:"_canReadAtom",value:function(t){return"----"!==t}},{key:"_parseData",value:function(t,e){var n={};for(var i in e=this._expandShortcutTags(e),this._readAtom(n,t,0,t.getSize(),e),m)m.hasOwnProperty(i)&&(e=n[m[i]])&&(n[i]="track"===i?e.data.track:e.data);return{type:"MP4",ftyp:t.getStringAt(8,4),version:t.getLongAt(12,!0),tags:n}}},{key:"_readAtom",value:function(t,e,n,i,r,o,a){a=void 0===a?"":a+"  ";for(var s=n;s<n+i;){var c=e.getLongAt(s,!0);if(0==c)break;var u=e.getStringAt(s+4,4);if(this._isContainerAtom(u)){"meta"==u&&(s+=4),this._readAtom(t,e,s+8,c-8,r,(o?o+".":"")+u,a);break}(!r||0<=r.indexOf(u))&&"moov.udta.meta.ilst"===o&&this._canReadAtom(u)&&(t[u]=this._readMetadataAtom(e,s)),s+=c}}},{key:"_readMetadataAtom",value:function(t,e){var n=t.getLongAt(e,!0),i=t.getStringAt(e+4,4),r=t.getInteger24At(e+16+1,!0);if(r=h[r],"trkn"==i)var o={track:t.getShortAt(e+16+10,!0),total:t.getShortAt(e+16+14,!0)};else if("disk"==i)o={disk:t.getShortAt(e+16+10,!0),total:t.getShortAt(e+16+14,!0)};else{e+=24;var a=n-24;switch("covr"===i&&"uint8"===r&&(r="jpeg"),r){case"text":o=t.getStringWithCharsetAt(e,a,"utf-8").toString();break;case"uint8":o=t.getShortAt(e,!1);break;case"int":case"uint":o=("int"==r?1==a?t.getSByteAt:2==a?t.getSShortAt:4==a?t.getSLongAt:t.getLongAt:1==a?t.getByteAt:2==a?t.getShortAt:t.getLongAt).call(t,e+(8==a?4:0),!0);break;case"jpeg":case"png":o={format:"image/"+r,data:t.getBytesAt(e,a)}}}return{id:i,size:n,description:p[i]||"Unknown",data:o}}},{key:"getShortcuts",value:function(){return m}}],[{key:"getTagIdentifierByteRange",value:function(){return{offset:0,length:16}}},{key:"canReadTagFormat",value:function(t){return"ftyp"===String.fromCharCode.apply(String,t.slice(4,8))}}]),e}();var h={0:"uint8",1:"text",13:"jpeg",14:"png",21:"int",22:"uint"},p={"©alb":"Album","©ART":"Artist",aART:"Album Artist","©day":"Release Date","©nam":"Title","©gen":"Genre",gnre:"Genre",trkn:"Track Number","©wrt":"Composer","©too":"Encoding Tool","©enc":"Encoded By",cprt:"Copyright",covr:"Cover Art","©grp":"Grouping",keyw:"Keywords","©lyr":"Lyrics","©cmt":"Comment",tmpo:"Tempo",cpil:"Compilation",disk:"Disc Number",tvsh:"TV Show Name",tven:"TV Episode ID",tvsn:"TV Season",tves:"TV Episode",tvnn:"TV Network",desc:"Description",ldes:"Long Description",sonm:"Sort Name",soar:"Sort Artist",soaa:"Sort Album",soco:"Sort Composer",sosn:"Sort Show",purd:"Purchase Date",pcst:"Podcast",purl:"Podcast URL",catg:"Category",hdvd:"HD Video",stik:"Media Type",rtng:"Content Rating",pgap:"Gapless Playback",apID:"Purchase Account",sfID:"Country Code",atID:"Artist ID",cnID:"Catalog ID",plID:"Collection ID",geID:"Genre ID","xid ":"Vendor Information",flvr:"Codec Flavor"},m={title:"©nam",artist:"©ART",album:"©alb",year:"©day",comment:"©cmt",track:"trkn",genre:"©gen",picture:"covr",lyrics:"©lyr"};e.exports=t},{"./MediaFileReader":11,"./MediaTagReader":12}],11:[function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function r(t,e,n){return e in t?S()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=t("./StringUtils");t=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");r(this,"_isInitialized",void 0),r(this,"_size",void 0),this._isInitialized=!1,this._size=0}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"init",value:function(t){var e=this;if(!this._isInitialized)return this._init({onSuccess:function(){e._isInitialized=!0,t.onSuccess()},onError:t.onError});setTimeout(t.onSuccess,1)}},{key:"_init",value:function(t){throw Error("Must implement init function")}},{key:"loadRange",value:function(t,e){throw Error("Must implement loadRange function")}},{key:"getSize",value:function(){if(!this._isInitialized)throw Error("init() must be called first.");return this._size}},{key:"getByteAt",value:function(t){throw Error("Must implement getByteAt function")}},{key:"getBytesAt",value:function(t,e){for(var n=Array(e),i=0;i<e;i++)n[i]=this.getByteAt(t+i);return n}},{key:"isBitSetAt",value:function(t,e){return 0!=(this.getByteAt(t)&1<<e)}},{key:"getSByteAt",value:function(t){return 127<(t=this.getByteAt(t))?t-256:t}},{key:"getShortAt",value:function(t,e){return 0>(t=e?(this.getByteAt(t)<<8)+this.getByteAt(t+1):(this.getByteAt(t+1)<<8)+this.getByteAt(t))&&(t+=65536),t}},{key:"getSShortAt",value:function(t,e){return 32767<(t=this.getShortAt(t,e))?t-65536:t}},{key:"getLongAt",value:function(t,e){var n=this.getByteAt(t),i=this.getByteAt(t+1),r=this.getByteAt(t+2);return t=this.getByteAt(t+3),0>(e=e?(((n<<8)+i<<8)+r<<8)+t:(((t<<8)+r<<8)+i<<8)+n)&&(e+=4294967296),e}},{key:"getSLongAt",value:function(t,e){return 2147483647<(t=this.getLongAt(t,e))?t-4294967296:t}},{key:"getInteger24At",value:function(t,e){var n=this.getByteAt(t),i=this.getByteAt(t+1);return t=this.getByteAt(t+2),0>(e=e?((n<<8)+i<<8)+t:((t<<8)+i<<8)+n)&&(e+=16777216),e}},{key:"getStringAt",value:function(t,e){for(var n=[],i=t,r=0;i<t+e;i++,r++)n[r]=String.fromCharCode(this.getByteAt(i));return n.join("")}},{key:"getStringWithCharsetAt",value:function(t,e,n){switch(t=this.getBytesAt(t,e),(n||"").toLowerCase()){case"utf-16":case"utf-16le":case"utf-16be":n=o.readUTF16String(t,"utf-16be"===n);break;case"utf-8":n=o.readUTF8String(t);break;default:n=o.readNullTerminatedString(t)}return n}},{key:"getCharAt",value:function(t){return String.fromCharCode(this.getByteAt(t))}},{key:"getSynchsafeInteger32At",value:function(t){var e=this.getByteAt(t),n=this.getByteAt(t+1),i=this.getByteAt(t+2);return 127&this.getByteAt(t+3)|(127&i)<<7|(127&n)<<14|(127&e)<<21}}],[{key:"canReadFile",value:function(t){throw Error("Must implement canReadFile function")}}]),t}(),e.exports=t},{"./StringUtils":13}],12:[function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function r(t,e,n){return e in t?S()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}t("./MediaFileReader"),t=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");r(this,"_mediaFileReader",void 0),r(this,"_tags",void 0),this._mediaFileReader=e,this._tags=null}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"setTagsToRead",value:function(t){return this._tags=t,this}},{key:"read",value:function(t){var e=this;this._mediaFileReader.init({onSuccess:function(){e._loadData(e._mediaFileReader,{onSuccess:function(){try{var n=e._parseData(e._mediaFileReader,e._tags)}catch(e){if(t.onError)return void t.onError({type:"parseData",info:e.message})}t.onSuccess(n)},onError:t.onError})},onError:t.onError})}},{key:"getShortcuts",value:function(){return{}}},{key:"_loadData",value:function(t,e){throw Error("Must implement _loadData function")}},{key:"_parseData",value:function(t,e){throw Error("Must implement _parseData function")}},{key:"_expandShortcutTags",value:function(t){if(!t)return null;for(var e,n=[],i=this.getShortcuts(),r=0;e=t[r];r++)n=n.concat(i[e]||[e]);return n}}],[{key:"getTagIdentifierByteRange",value:function(){throw Error("Must implement")}},{key:"canReadTagFormat",value:function(t){throw Error("Must implement")}}]),t}(),e.exports=t},{"./MediaFileReader":11}],13:[function(t,e,n){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function r(t,e,n){return e in t?S()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=function(){function t(e,n){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function");r(this,"_value",void 0),r(this,"bytesReadCount",void 0),r(this,"length",void 0),this._value=e,this.bytesReadCount=n,this.length=e.length}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"toString",value:function(){return this._value}}]),t}();e.exports={readUTF16String:function(t,e,n){var i=0,r=1,a=0;n=Math.min(n||t.length,t.length),254==t[0]&&255==t[1]?(e=!0,i=2):255==t[0]&&254==t[1]&&(e=!1,i=2),e&&(r=0,a=1),e=[];for(var s=0;i<n;s++){var c=t[i+r],u=(c<<8)+t[i+a];if(i+=2,0==u)break;216>c||224<=c?e[s]=String.fromCharCode(u):(c=(t[i+r]<<8)+t[i+a],i+=2,e[s]=String.fromCharCode(u,c))}return new o(e.join(""),i)},readUTF8String:function(t,e){var n=0;e=Math.min(e||t.length,t.length),239==t[0]&&187==t[1]&&191==t[2]&&(n=3);for(var i=[],r=0;n<e;r++){var a=t[n++];if(0==a)break;if(128>a)i[r]=String.fromCharCode(a);else if(194<=a&&224>a){var s=t[n++];i[r]=String.fromCharCode(((31&a)<<6)+(63&s))}else if(224<=a&&240>a){s=t[n++];var c=t[n++];i[r]=String.fromCharCode(((255&a)<<12)+((63&s)<<6)+(63&c))}else if(240<=a&&245>a){c=((7&a)<<18)+((63&(s=t[n++]))<<12)+((63&(c=t[n++]))<<6)+(63&t[n++])-65536,i[r]=String.fromCharCode(55296+(c>>10),56320+(1023&c))}}return new o(i.join(""),n)},readNullTerminatedString:function(t,e){var n=[];e=e||t.length;for(var i=0;i<e;){var r=t[i++];if(0==r)break;n[i-1]=String.fromCharCode(r)}return new o(n.join(""),i)}}},{}],14:[function(t,e,n){function i(t){"@babel/helpers - typeof";return(i="function"==typeof f.a&&"symbol"===_()(d.a)?function(t){return void 0===t?"undefined":_()(t)}:function(t){return t&&"function"==typeof f.a&&t.constructor===f.a&&t!==f.a.prototype?"symbol":void 0===t?"undefined":_()(t)})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=v()(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&a(t,e)}function a(t,e){return(a=u.a||function(t,e){return t.__proto__=e,t})(t,e)}function c(t){var e=function(){if("undefined"==typeof Reflect||!g.a||g.a.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(g()(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var n=h(t);if(e){var r=h(this).constructor;n=g()(n,arguments,r)}else n=n.apply(this,arguments);return n=!n||"object"!==i(n)&&"function"!=typeof n?l(this):n}}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=u.a?s.a:function(t){return t.__proto__||s()(t)})(t)}function p(t,e,n){return e in t?S()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var m=t("./ChunkedFileData");p(n=function(e){function n(t){if(!(this instanceof n))throw new TypeError("Cannot call a class as a function");var e=i.call(this);return p(l(e),"_url",void 0),p(l(e),"_fileData",void 0),e._url=t,e._fileData=new m,e}o(n,t("./MediaFileReader"));var i=c(n);return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(n,[{key:"_init",value:function(t){n._config.avoidHeadRequests?this._fetchSizeWithGetRequest(t):this._fetchSizeWithHeadRequest(t)}},{key:"_fetchSizeWithHeadRequest",value:function(t){var e=this;this._makeXHRRequest("HEAD",null,{onSuccess:function(n){(n=e._parseContentLength(n))?(e._size=n,t.onSuccess()):e._fetchSizeWithGetRequest(t)},onError:t.onError})}},{key:"_fetchSizeWithGetRequest",value:function(t){var e=this,n=this._roundRangeToChunkMultiple([0,0]);this._makeXHRRequest("GET",n,{onSuccess:function(n){var i=e._parseContentRange(n);if(n=e._getXhrResponseContent(n),i){if(null==i.instanceLength)return void e._fetchEntireFile(t);e._size=i.instanceLength}else e._size=n.length;e._fileData.addData(0,n),t.onSuccess()},onError:t.onError})}},{key:"_fetchEntireFile",value:function(t){var e=this;this._makeXHRRequest("GET",null,{onSuccess:function(n){n=e._getXhrResponseContent(n),e._size=n.length,e._fileData.addData(0,n),t.onSuccess()},onError:t.onError})}},{key:"_getXhrResponseContent",value:function(t){return t.responseBody||t.responseText||""}},{key:"_parseContentLength",value:function(t){return null==(t=this._getResponseHeader(t,"Content-Length"))?t:parseInt(t,10)}},{key:"_parseContentRange",value:function(t){if(t=this._getResponseHeader(t,"Content-Range")){var e=t.match(/bytes (\d+)-(\d+)\/(?:(\d+)|\*)/i);if(!e)throw Error("FIXME: Unknown Content-Range syntax: "+t);return{firstBytePosition:parseInt(e[1],10),lastBytePosition:parseInt(e[2],10),instanceLength:e[3]?parseInt(e[3],10):null}}return null}},{key:"loadRange",value:function(t,e){var n=this;n._fileData.hasDataRange(t[0],Math.min(n._size,t[1]))?setTimeout(e.onSuccess,1):((t=this._roundRangeToChunkMultiple(t))[1]=Math.min(n._size,t[1]),this._makeXHRRequest("GET",t,{onSuccess:function(i){i=n._getXhrResponseContent(i),n._fileData.addData(t[0],i),e.onSuccess()},onError:e.onError}))}},{key:"_roundRangeToChunkMultiple",value:function(t){return[t[0],t[0]+1024*Math.ceil((t[1]-t[0]+1)/1024)-1]}},{key:"_makeXHRRequest",value:function(t,e,i){var r=this._createXHRObject();r.open(t,this._url);var o=function(){200===r.status||206===r.status?i.onSuccess(r):i.onError&&i.onError({type:"xhr",info:"Unexpected HTTP status "+r.status+".",xhr:r}),r=null};void 0!==r.onload?(r.onload=o,r.onerror=function(){i.onError&&i.onError({type:"xhr",info:"Generic XHR error, check xhr object.",xhr:r})}):r.onreadystatechange=function(){4===r.readyState&&o()},n._config.timeoutInSec&&(r.timeout=1e3*n._config.timeoutInSec,r.ontimeout=function(){i.onError&&i.onError({type:"xhr",info:"Timeout after "+r.timeout/1e3+"s. Use jsmediatags.Config.setXhrTimeout to override.",xhr:r})}),r.overrideMimeType("text/plain; charset=x-user-defined"),e&&this._setRequestHeader(r,"Range","bytes="+e[0]+"-"+e[1]),this._setRequestHeader(r,"If-Modified-Since","Sat, 01 Jan 1970 00:00:00 GMT"),r.send(null)}},{key:"_setRequestHeader",value:function(t,e,i){0>n._config.disallowedXhrHeaders.indexOf(e.toLowerCase())&&t.setRequestHeader(e,i)}},{key:"_hasResponseHeader",value:function(t,e){if(!(t=t.getAllResponseHeaders()))return!1;t=t.split("\r\n");for(var n=[],i=0;i<t.length;i++)n[i]=t[i].split(":")[0].toLowerCase();return 0<=n.indexOf(e.toLowerCase())}},{key:"_getResponseHeader",value:function(t,e){return this._hasResponseHeader(t,e)?t.getResponseHeader(e):null}},{key:"getByteAt",value:function(t){return 255&this._fileData.getByteAt(t).charCodeAt(0)}},{key:"_isWebWorker",value:function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope}},{key:"_createXHRObject",value:function(){if("undefined"==typeof window&&!this._isWebWorker())return new(t("xhr2").XMLHttpRequest);if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;throw Error("XMLHttpRequest is not supported")}}],[{key:"canReadFile",value:function(t){return"string"==typeof t&&/^[a-z]+:\/\//i.test(t)}},{key:"setConfig",value:function(t){for(var e in t)t.hasOwnProperty(e)&&(this._config[e]=t[e]);for(t=this._config.disallowedXhrHeaders,e=0;e<t.length;e++)t[e]=t[e].toLowerCase()}}]),n}(),"_config",void 0),n._config={avoidHeadRequests:!1,disallowedXhrHeaders:[],timeoutInSec:30},e.exports=n},{"./ChunkedFileData":5,"./MediaFileReader":11,xhr2:2}],15:[function(t,e,n){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),S()(t,i.key,i)}}function a(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}function s(t,e,n){return e in t?S()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){var n=0>t.offset&&(-t.offset>e||0<t.offset+t.length);return!(0<=t.offset&&t.offset+t.length>=e||n)}t("./MediaFileReader");var u=t("./XhrFileReader"),l=t("./BlobFileReader"),d=t("./ArrayFileReader");t("./MediaTagReader");var h=t("./ID3v1TagReader"),f=t("./ID3v2TagReader"),p=t("./MP4TagReader"),g=t("./FLACTagReader"),m=[],v=[],y=function(){function t(e){r(this,t),s(this,"_file",void 0),s(this,"_tagsToRead",void 0),s(this,"_fileReader",void 0),s(this,"_tagReader",void 0),this._file=e}return a(t,[{key:"setTagsToRead",value:function(t){return this._tagsToRead=t,this}},{key:"setFileReader",value:function(t){return this._fileReader=t,this}},{key:"setTagReader",value:function(t){return this._tagReader=t,this}},{key:"read",value:function(t){var e=new(this._getFileReader())(this._file),n=this;e.init({onSuccess:function(){n._getTagReader(e,{onSuccess:function(i){new i(e).setTagsToRead(n._tagsToRead).read(t)},onError:t.onError})},onError:t.onError})}},{key:"_getFileReader",value:function(){return this._fileReader?this._fileReader:this._findFileReader()}},{key:"_findFileReader",value:function(){for(var t=0;t<m.length;t++)if(m[t].canReadFile(this._file))return m[t];throw Error("No suitable file reader found for "+this._file)}},{key:"_getTagReader",value:function(t,e){if(this._tagReader){var n=this._tagReader;setTimeout(function(){e.onSuccess(n)},1)}else this._findTagReader(t,e)}},{key:"_findTagReader",value:function(t,e){for(var n=[],i=[],r=t.getSize(),o=0;o<v.length;o++){var a=v[o].getTagIdentifierByteRange();c(a,r)&&(0<=a.offset&&a.offset<r/2||0>a.offset&&a.offset<-r/2?n.push(v[o]):i.push(v[o]))}var s=!1;o={onSuccess:function(){if(s){for(var n=0;n<v.length;n++){var i=v[n].getTagIdentifierByteRange();if(c(i,r)){try{var o=t.getBytesAt(0<=i.offset?i.offset:i.offset+r,i.length)}catch(t){return void(e.onError&&e.onError({type:"fileReader",info:t.message}))}if(v[n].canReadTagFormat(o))return void e.onSuccess(v[n])}}e.onError&&e.onError({type:"tagFormat",info:"No suitable tag reader found"})}else s=!0},onError:e.onError},this._loadTagIdentifierRanges(t,n,o),this._loadTagIdentifierRanges(t,i,o)}},{key:"_loadTagIdentifierRanges",value:function(t,e,n){if(0===e.length)setTimeout(n.onSuccess,1);else{for(var i=[Number.MAX_VALUE,0],r=t.getSize(),o=0;o<e.length;o++){var a=e[o].getTagIdentifierByteRange(),s=0<=a.offset?a.offset:a.offset+r;a=s+a.length-1,i[0]=Math.min(s,i[0]),i[1]=Math.max(a,i[1])}t.loadRange(i,n)}}}]),t}();(n=function(){function t(){r(this,t)}return a(t,null,[{key:"addFileReader",value:function(e){return m.push(e),t}},{key:"addTagReader",value:function(e){return v.push(e),t}},{key:"removeTagReader",value:function(e){return 0<=(e=v.indexOf(e))&&v.splice(e,1),t}},{key:"EXPERIMENTAL_avoidHeadRequests",value:function(){u.setConfig({avoidHeadRequests:!0})}},{key:"setDisallowedXhrHeaders",value:function(t){u.setConfig({disallowedXhrHeaders:t})}},{key:"setXhrTimeoutInSec",value:function(t){u.setConfig({timeoutInSec:t})}}]),t}()).addFileReader(u).addFileReader(l).addFileReader(d).addTagReader(f).addTagReader(h).addTagReader(p).addTagReader(g),void 0===i||i.browser||(t="undefined"!=typeof navigator&&"ReactNative"===navigator.product?t("./ReactNativeFileReader"):t("./NodeFileReader"),n.addFileReader(t)),e.exports={read:function(t,e){new y(t).read(e)},Reader:y,Config:n}},{"./ArrayFileReader":3,"./BlobFileReader":4,"./FLACTagReader":6,"./ID3v1TagReader":7,"./ID3v2TagReader":9,"./MP4TagReader":10,"./MediaFileReader":11,"./MediaTagReader":12,"./NodeFileReader":1,"./ReactNativeFileReader":1,"./XhrFileReader":14}]},{},[15])(15)})}).call(e,n("DuR2"),n("EuP9").Buffer,n("W2nU"),n("f1Eh")(t))},"Km9/":function(t,e){},LFj0:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("7+uW");i.default.directive("watch-height",{bind:function(t,e,n){},inserted:function(){},update:function(t,e,n){},componentUpdated:function(t,e,n,i){n.v_unbind_watch_height&&n.v_unbind_watch_height(),i.v_unbind_watch_height&&i.v_unbind_watch_height(),"function"==typeof e.value&&(n.v_watch_height=function(i){try{e.value(t.clientHeight,t.parentNode.clientHeight)}catch(t){console.error(err)}!0===i&&window.addEventListener("resize",n.v_watch_height,!1)},n.v_unbind_watch_height=function(){window.removeEventListener("resize",n.v_watch_height,!1),n.v_watch_height=void 0,n.v_unbind_watch_height=void 0},n.v_watch_height(!0))},unbind:function(t,e,n){n.v_unbind_watch_height&&n.v_unbind_watch_height()}}),i.default.component("right-click-menu",{props:["bindRef","menus"],data:function(){return{posX:0,posY:0,currentVisible:!1}},template:"\n\t<Dropdown :style='locatorStyle' placement='right-start' trigger='custom' :visible='currentVisible' @on-click='onClick' @on-clickoutside='handleCancel'>\n\t\t<Dropdown-Menu slot='list'>\n\t\t\t<Dropdown-Item v-for='(val, key) in menus' v-show='val.show' :name='key' :divided='val.divided'>\n\t\t\t<i v-if='val.icon' :class='val.icon' style='padding-right: 3px;'></i> <span style='vertical-align: middle;'>{{val.name}}</span>\n\t\t\t</Dropdown-Item>\n\t\t</Dropdown-Menu>\n\t</Dropdown>\n\t",computed:{locatorStyle:function(){return{position:"fixed",left:this.posX+"px",top:this.posY+"px",maxHeight:"unset",binddom:null}}},methods:{onClick:function(t){if(this.currentVisible=!1,this.menus[t]&&this.menus[t].handler)try{this.menus[t].handler(this.menus[t])}catch(t){console.error(t)}},handleContextmenu:function(t){var e=this;t.preventDefault(),t.stopPropagation(),t.returnValue=!1,2===t.button&&(this.currentVisible=!1,this.posX!==t.clientX&&(this.posX=t.clientX),this.posY!==t.clientY&&(this.posY=t.clientY),this.$nextTick(function(){e.currentVisible=!0}))},handleCancel:function(){this.currentVisible=!1},getRefNode:function(){if(!this.bindRef)return document;for(var t=this;!t.$refs[this.bindRef]&&(t=t.$parent););return t?t.$refs[this.bindRef].$el:{}}},mounted:function(){this.binddom=this.getRefNode(),this.binddom.addEventListener("contextmenu",this.handleContextmenu,!0),this.binddom.addEventListener("mouseup",this.handleCancel,!0)},destroyed:function(){try{this.currentVisible=!1,this.binddom.removeEventListener("contextmenu",this.handleContextmenu,!0),this.binddom.removeEventListener("mouseup",this.handleCancel,!0)}catch(t){}},watch:{}});var r=n("5H02"),o={name:"App",created:function(){r.a.setAPIHost("http://127.0.0.1:8080"),this.$nextTick(this.stopDrop)},methods:{stopDrop:function(){try{this.$el.ondrop=function(t){t.preventDefault(),t.stopPropagation()},this.$el.ondragover=function(t){t.preventDefault(),t.stopPropagation()},this.$el.ondragleave=function(t){t.preventDefault(),t.stopPropagation()},this.$el.ondragenter=function(t){t.preventDefault(),t.stopPropagation()},this.$el.oncontextmenu=function(t){t.preventDefault(),t.stopPropagation()}}catch(t){console.error(t)}}}},a={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")(o,a,!1,function(t){n("Tt9T")},null,null).exports,c=n("/ocq"),u=n("OvRC"),d=n.n(u);!function(){for(var t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];var n=0;window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime();return f=Math.max(0,1-(e-n)),g=window.setTimeout(function(){t(e+f)},f),n=e+f,g}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),Math.PIM2=2*Math.PI,Math.PID2=Math.PI/2,Math.randomInRange=function(t,e){return t+(e-t)*Math.random()},Math.clamp=function(t,e,n){return t=Math.max(t,e),Math.min(t,n)};var h={FRONT:0,BACK:1,DOUBLE:2,SVGNS:"http://www.w3.org/2000/svg"};function p(t,e){if(document.createElement("canvas").getContext){var n,i,r,o,a,s,c,u=function(){c=new h.CanvasRenderer,d(E.renderer)},d=function(t){switch(i&&P.removeChild(i.element),t){case D:i=c}i.setSize(P.offsetWidth,P.offsetHeight),P.appendChild(i.element)},f=function(){r=new h.Scene},p=function(){var t,e;for(r.remove(o),i.clear(),a=new h.Plane(b.width*i.width,b.height*i.height,b.segments,b.slices),s=new h.Material(b.ambient,b.diffuse),o=new h.Mesh(a,s),r.add(o),t=a.vertices.length-1;t>=0;t--)(e=a.vertices[t]).anchor=h.Vector3.clone(e.position),e.step=h.Vector3.create(Math.randomInRange(.1,1),Math.randomInRange(.1,1),Math.randomInRange(.1,1)),e.time=Math.randomInRange(0,Math.PIM2)},g=function(){var t,e;for(t=r.lights.length-1;t>=0;t--)e=r.lights[t],r.remove(e);for(i.clear(),t=0;t<x.count;t++)(e=new h.Light(x.ambient,x.diffuse)).ambientHex=e.ambient.format(),e.diffuseHex=e.diffuse.format(),r.add(e),e.mass=Math.randomInRange(.5,1),e.velocity=h.Vector3.create(),e.acceleration=h.Vector3.create(),e.force=h.Vector3.create()},m=function(t,e){i.setSize(t,e),h.Vector3.set(k,i.halfWidth,i.halfHeight),p()},v=function t(){n=Date.now()-T,y(),_(),requestAnimationFrame(t)},y=function(){var t,e,i,o,s,c,u,l=b.depth/2;for(h.Vector3.copy(x.bounds,k),h.Vector3.multiplyScalar(x.bounds,x.xyScalar),h.Vector3.setZ(C,x.zOffset),o=r.lights.length-1;o>=0;o--){s=r.lights[o],h.Vector3.setZ(s.position,x.zOffset);var d=Math.clamp(h.Vector3.distanceSquared(s.position,C),x.minDistance,x.maxDistance),f=x.gravity*s.mass/d;h.Vector3.subtractVectors(s.force,C,s.position),h.Vector3.normalise(s.force),h.Vector3.multiplyScalar(s.force,f),h.Vector3.set(s.acceleration),h.Vector3.add(s.acceleration,s.force),h.Vector3.add(s.velocity,s.acceleration),h.Vector3.multiplyScalar(s.velocity,x.dampening),h.Vector3.limit(s.velocity,x.minLimit,x.maxLimit),h.Vector3.add(s.position,s.velocity)}for(c=a.vertices.length-1;c>=0;c--)u=a.vertices[c],t=Math.sin(u.time+u.step[0]*n*b.speed),e=Math.cos(u.time+u.step[1]*n*b.speed),i=Math.sin(u.time+u.step[2]*n*b.speed),h.Vector3.set(u.position,b.xRange*a.segmentWidth*t,b.yRange*a.sliceHeight*e,b.zRange*l*i-l),h.Vector3.add(u.position,u.anchor);a.dirty=!0},_=function(){i.render(r)},w=function(){window.addEventListener("resize",S)},S=function(t){m(P.offsetWidth,P.offsetHeight),_()},b={width:1.5,height:1.5,depth:10,segments:12,slices:6,xRange:.8,yRange:.1,zRange:1,ambient:"#6b6b6b",diffuse:"#A5A5A5",speed:1e-4},x={count:2,xyScalar:1,zOffset:100,ambient:"#039AE6",diffuse:"#039AE6",speed:.001,gravity:1200,dampening:.95,minLimit:10,maxLimit:null,minDistance:20,maxDistance:400,autopilot:!1,draw:!1,bounds:h.Vector3.create(),step:h.Vector3.create(Math.randomInRange(.1,1),Math.randomInRange(.1,1),Math.randomInRange(.1,1))},D="canvas",E={renderer:D},T=Date.now(),k=h.Vector3.create(),C=h.Vector3.create(),P=document.getElementById(t||"container");return u(),f(),p(),g(),w(),m(P.offsetWidth,P.offsetHeight),v(),function(t){var e,n,i=t;return{set:function(){!function(t){for(e=0,l=r.lights.length;e<l;e++)(n=r.lights[e]).ambient.set(t),n.ambientHex=n.ambient.format()}(i[0]),function(t){for(e=0,l=r.lights.length;e<l;e++)(n=r.lights[e]).diffuse.set(t),n.diffuseHex=n.diffuse.format()}(i[1])}}}}}h.Array="function"==typeof Float32Array?Float32Array:Array,h.Utils={isNumber:function(t){return!isNaN(parseFloat(t))&&isFinite(t)}},h.Vector3={create:function(t,e,n){var i=new h.Array(3);return this.set(i,t,e,n),i},clone:function(t){var e=this.create();return this.copy(e,t),e},set:function(t,e,n,i){return t[0]=e||0,t[1]=n||0,t[2]=i||0,this},setX:function(t,e){return t[0]=e||0,this},setY:function(t,e){return t[1]=e||0,this},setZ:function(t,e){return t[2]=e||0,this},copy:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],this},add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],this},addVectors:function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],this},addScalar:function(t,e){return t[0]+=e,t[1]+=e,t[2]+=e,this},subtract:function(t,e){return t[0]-=e[0],t[1]-=e[1],t[2]-=e[2],this},subtractVectors:function(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],this},subtractScalar:function(t,e){return t[0]-=e,t[1]-=e,t[2]-=e,this},multiply:function(t,e){return t[0]*=e[0],t[1]*=e[1],t[2]*=e[2],this},multiplyVectors:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],this},multiplyScalar:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,this},divide:function(t,e){return t[0]/=e[0],t[1]/=e[1],t[2]/=e[2],this},divideVectors:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],this},divideScalar:function(t,e){return 0!==e?(t[0]/=e,t[1]/=e,t[2]/=e):(t[0]=0,t[1]=0,t[2]=0),this},cross:function(t,e){var n=t[0],i=t[1],r=t[2];return t[0]=i*e[2]-r*e[1],t[1]=r*e[0]-n*e[2],t[2]=n*e[1]-i*e[0],this},crossVectors:function(t,e,n){return t[0]=e[1]*n[2]-e[2]*n[1],t[1]=e[2]*n[0]-e[0]*n[2],t[2]=e[0]*n[1]-e[1]*n[0],this},min:function(t,e){return t[0]<e&&(t[0]=e),t[1]<e&&(t[1]=e),t[2]<e&&(t[2]=e),this},max:function(t,e){return t[0]>e&&(t[0]=e),t[1]>e&&(t[1]=e),t[2]>e&&(t[2]=e),this},clamp:function(t,e,n){return this.min(t,e),this.max(t,n),this},limit:function(t,e,n){var i=this.length(t);return null!==e&&i<e?this.setLength(t,e):null!==n&&i>n&&this.setLength(t,n),this},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]},normalise:function(t){return this.divideScalar(t,this.length(t))},negate:function(t){return this.multiplyScalar(t,-1)},distanceSquared:function(t,e){var n=t[0]-e[0],i=t[1]-e[1],r=t[2]-e[2];return n*n+i*i+r*r},distance:function(t,e){return Math.sqrt(this.distanceSquared(t,e))},lengthSquared:function(t){return t[0]*t[0]+t[1]*t[1]+t[2]*t[2]},length:function(t){return Math.sqrt(this.lengthSquared(t))},setLength:function(t,e){var n=this.length(t);return 0!==n&&e!==n&&this.multiplyScalar(t,e/n),this}},h.Vector4={create:function(t,e,n){var i=new h.Array(4);return this.set(i,t,e,n),i},set:function(t,e,n,i,r){return t[0]=e||0,t[1]=n||0,t[2]=i||0,t[3]=r||0,this},setX:function(t,e){return t[0]=e||0,this},setY:function(t,e){return t[1]=e||0,this},setZ:function(t,e){return t[2]=e||0,this},setW:function(t,e){return t[3]=e||0,this},add:function(t,e){return t[0]+=e[0],t[1]+=e[1],t[2]+=e[2],t[3]+=e[3],this},multiplyVectors:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],this},multiplyScalar:function(t,e){return t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,this},min:function(t,e){return t[0]<e&&(t[0]=e),t[1]<e&&(t[1]=e),t[2]<e&&(t[2]=e),t[3]<e&&(t[3]=e),this},max:function(t,e){return t[0]>e&&(t[0]=e),t[1]>e&&(t[1]=e),t[2]>e&&(t[2]=e),t[3]>e&&(t[3]=e),this},clamp:function(t,e,n){return this.min(t,e),this.max(t,n),this}},h.Color=function(t,e){this.rgba=h.Vector4.create(),this.hex=t||"#000000",this.opacity=h.Utils.isNumber(e)?e:1,this.set(this.hex,this.opacity)},h.Color.prototype={set:function(t,e){var n=(t=t.replace("#","")).length/3;return this.rgba[0]=parseInt(t.substring(0*n,1*n),16)/255,this.rgba[1]=parseInt(t.substring(1*n,2*n),16)/255,this.rgba[2]=parseInt(t.substring(2*n,3*n),16)/255,this.rgba[3]=h.Utils.isNumber(e)?e:this.rgba[3],this},hexify:function(t){return 1===(t=Math.ceil(255*t).toString(16)).length&&(t="0"+t),t},format:function(){var t=this.hexify(this.rgba[0]),e=this.hexify(this.rgba[1]),n=this.hexify(this.rgba[2]);return this.hex="#"+t+e+n}},h.Object=function(){this.position=h.Vector3.create()},h.Object.prototype={setPosition:function(t,e,n){return h.Vector3.set(this.position,t,e,n),this}},h.Light=function(t,e){h.Object.call(this),this.ambient=new h.Color(t||"#FFFFFF"),this.diffuse=new h.Color(e||"#FFFFFF"),this.ray=h.Vector3.create()},h.Light.prototype=d()(h.Object.prototype),h.Vertex=function(t,e,n){this.position=h.Vector3.create(t,e,n)},h.Vertex.prototype={setPosition:function(t,e,n){return h.Vector3.set(this.position,t,e,n),this}},h.Triangle=function(t,e,n){this.a=t||new h.Vertex,this.b=e||new h.Vertex,this.c=n||new h.Vertex,this.vertices=[this.a,this.b,this.c],this.u=h.Vector3.create(),this.v=h.Vector3.create(),this.centroid=h.Vector3.create(),this.normal=h.Vector3.create(),this.color=new h.Color,this.polygon=document.createElementNS(h.SVGNS,"polygon"),this.polygon.setAttributeNS(null,"stroke-linejoin","round"),this.polygon.setAttributeNS(null,"stroke-miterlimit","1"),this.polygon.setAttributeNS(null,"stroke-width","1"),this.computeCentroid(),this.computeNormal()},h.Triangle.prototype={computeCentroid:function(){return this.centroid[0]=this.a.position[0]+this.b.position[0]+this.c.position[0],this.centroid[1]=this.a.position[1]+this.b.position[1]+this.c.position[1],this.centroid[2]=this.a.position[2]+this.b.position[2]+this.c.position[2],h.Vector3.divideScalar(this.centroid,3),this},computeNormal:function(){return h.Vector3.subtractVectors(this.u,this.b.position,this.a.position),h.Vector3.subtractVectors(this.v,this.c.position,this.a.position),h.Vector3.crossVectors(this.normal,this.u,this.v),h.Vector3.normalise(this.normal),this}},h.Geometry=function(){this.vertices=[],this.triangles=[],this.dirty=!1},h.Geometry.prototype={update:function(){if(this.dirty){var t,e;for(t=this.triangles.length-1;t>=0;t--)(e=this.triangles[t]).computeCentroid(),e.computeNormal();this.dirty=!1}return this}},h.Plane=function(t,e,n,i){h.Geometry.call(this),this.width=t||100,this.height=e||100,this.segments=n||4,this.slices=i||4,this.segmentWidth=this.width/this.segments,this.sliceHeight=this.height/this.slices;var r,o,a,s,c;n=[];for(r=-.5*this.width,o=.5*this.height,t=0;t<=this.segments;t++)for(n.push([]),e=0;e<=this.slices;e++)i=new h.Vertex(r+t*this.segmentWidth,o-e*this.sliceHeight),n[t].push(i),this.vertices.push(i);for(t=0;t<this.segments;t++)for(e=0;e<this.slices;e++)i=n[t+0][e+0],r=n[t+0][e+1],o=n[t+1][e+0],a=n[t+1][e+1],s=new h.Triangle(i,r,o),c=new h.Triangle(o,r,a),this.triangles.push(s,c)},h.Plane.prototype=d()(h.Geometry.prototype),h.Material=function(t,e){this.ambient=new h.Color(t||"#444444"),this.diffuse=new h.Color(e||"#FFFFFF"),this.slave=new h.Color},h.Mesh=function(t,e){h.Object.call(this),this.geometry=t||new h.Geometry,this.material=e||new h.Material,this.side=h.FRONT,this.visible=!0},h.Mesh.prototype=d()(h.Object.prototype),h.Mesh.prototype.update=function(t,e){var n,i,r,o,a;if(this.geometry.update(),e)for(n=this.geometry.triangles.length-1;n>=0;n--){for(i=this.geometry.triangles[n],h.Vector4.set(i.color.rgba),r=t.length-1;r>=0;r--)o=t[r],h.Vector3.subtractVectors(o.ray,o.position,i.centroid),h.Vector3.normalise(o.ray),a=h.Vector3.dot(i.normal,o.ray),this.side===h.FRONT?a=Math.max(a,0):this.side===h.BACK?a=Math.abs(Math.min(a,0)):this.side===h.DOUBLE&&(a=Math.max(Math.abs(a),0)),h.Vector4.multiplyVectors(this.material.slave.rgba,this.material.ambient.rgba,o.ambient.rgba),h.Vector4.add(i.color.rgba,this.material.slave.rgba),h.Vector4.multiplyVectors(this.material.slave.rgba,this.material.diffuse.rgba,o.diffuse.rgba),h.Vector4.multiplyScalar(this.material.slave.rgba,a),h.Vector4.add(i.color.rgba,this.material.slave.rgba);h.Vector4.clamp(i.color.rgba,0,1)}return this},h.Scene=function(){this.meshes=[],this.lights=[]},h.Scene.prototype={add:function(t){return t instanceof h.Mesh&&!~this.meshes.indexOf(t)?this.meshes.push(t):t instanceof h.Light&&!~this.lights.indexOf(t)&&this.lights.push(t),this},remove:function(t){return t instanceof h.Mesh&&~this.meshes.indexOf(t)?this.meshes.splice(this.meshes.indexOf(t),1):t instanceof h.Light&&~this.lights.indexOf(t)&&this.lights.splice(this.lights.indexOf(t),1),this}},h.Renderer=function(){this.halfHeight=this.halfWidth=this.height=this.width=0},h.Renderer.prototype={setSize:function(t,e){if(this.width!==t||this.height!==e)return this.width=t,this.height=e,this.halfWidth=.5*this.width,this.halfHeight=.5*this.height,this},clear:function(){return this},render:function(){return this}},h.CanvasRenderer=function(){h.Renderer.call(this),this.element=document.createElement("canvas"),this.element.style.display="block",this.context=this.element.getContext("2d"),this.setSize(this.element.width,this.element.height)},h.CanvasRenderer.prototype=d()(h.Renderer.prototype),h.CanvasRenderer.prototype.setSize=function(t,e){return h.Renderer.prototype.setSize.call(this,t,e),this.element.width=t,this.element.height=e,this.context.setTransform(1,0,0,-1,this.halfWidth,this.halfHeight),this},h.CanvasRenderer.prototype.clear=function(){return h.Renderer.prototype.clear.call(this),this.context.clearRect(-this.halfWidth,-this.halfHeight,this.width,this.height),this},h.CanvasRenderer.prototype.render=function(t){var e,n,i,r,o;for(h.Renderer.prototype.render.call(this,t),this.clear(),this.context.lineJoin="round",this.context.lineWidth=1,e=t.meshes.length-1;e>=0;e--)if((n=t.meshes[e]).visible)for(n.update(t.lights,!0),i=n.geometry.triangles.length-1;i>=0;i--)o=(r=n.geometry.triangles[i]).color.format(),this.context.beginPath(),this.context.moveTo(r.a.position[0],r.a.position[1]),this.context.lineTo(r.b.position[0],r.b.position[1]),this.context.lineTo(r.c.position[0],r.c.position[1]),this.context.closePath(),this.context.strokeStyle=o,this.context.fillStyle=o,this.context.stroke(),this.context.fill();return this};var m=n("mF0L"),v=n("//Fk"),y=n.n(v),_={$TYPES:{1:"管理员",0:"普通用户"},login:function(t,e){return new y.a(function(n,i){m.a.AjaxRequest({method:"POST",uri:r.a.buildAPIURL("/user/v1/checkpwd"),datas:{userid:t,pwd:e}}).do(function(t,e){if(4===t.readyState){var o=r.a.apiResponseFormat(t);200===o.code?n(o.data):i(o.data)}})})},logout:function(){return r.a.apiPost("/user/v1/logout")},queryuser:function(t){return r.a.apiGet("/user/v1/queryuser",{userid:t})},updateUserName:function(t,e){return r.a.apiPost("/user/v1/updateusername",{userid:t,username:e})},updateUserPwd:function(t,e){return r.a.apiPost("/user/v1/updateuserpwd",{userid:t,userpwd:e})},listAllUsers:function(t,e){return r.a.apiGet("/user/v1/listallusers",{})},addUser:function(t,e,n){return r.a.apiPost("/user/v1/adduser",{userid:t,username:e,userpwd:n||""})},delUser:function(t){return r.a.apiDelete("/user/v1/deluser",{userid:t})},sync:{updateUserName:function(t,e){return r.a.apiPostSync("/user/v1/updateusername",{userid:t,username:e})},updateUserPwd:function(t,e){return r.a.apiPostSync("/user/v1/updateuserpwd",{userid:t,userpwd:e})},delUser:function(t){return r.a.apiDeleteSync("/user/v1/deluser",{userid:t})}}};_.$TYPES.__proto__={parse:function(t){return _.$TYPES[t]?_.$TYPES[t]:"未知类型"}};var w={name:"LogIn",data:function(){return{loading:!1,loginform_margin_top:100,loginform_margin_left:100,loginform:{user:"",password:""},message:"正在登录,请稍后..."}},methods:{handleSubmit:function(){var t=this;m.a.supportES6()?(this.loading=!0,_.login(this.loginform.user,this.loginform.password).then(function(e){t.loading=!1,r.a.saveSession(e),t.$router.push("/main")}).catch(function(e){console.error(e),t.loading=!1,t.$Message.error("登录失败")})):alert("当前浏览器不受支持, 推荐: edge, chrome, firefox等现代浏览器")},doAutoHeight:function(t){var e=this;this.$nextTick(function(){e.$refs["login-page"]&&e.$refs.loginwarp&&(e.loginform_margin_top=e.$refs["login-page"].clientHeight/2-e.$refs.loginwarp.clientHeight/2-50,e.loginform_margin_left=e.$refs["login-page"].clientWidth/2-e.$refs.loginwarp.clientWidth/2)}),t||window.addEventListener("resize",function(){e.doAutoHeight(!0)})},doRenderbg:function(){this.$nextTick(function(){p("bg")})}},created:function(){this.doAutoHeight(),this.doRenderbg()}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"login-page",staticClass:"page"},[n("div",[n("div",{ref:"loginwarp",staticClass:"login-warp",style:{"margin-top":t.loginform_margin_top+"px","margin-left":t.loginform_margin_left+"px"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit.apply(null,arguments)}}},[n("Form",{attrs:{model:t.loginform}},[n("FormItem",[n("span",{staticStyle:{"font-size":"20px",color:"#666"}},[t._v("登录系统")])]),t._v(" "),n("FormItem",[n("i-input",{attrs:{type:"text",placeholder:"用户"},model:{value:t.loginform.user,callback:function(e){t.$set(t.loginform,"user",e)},expression:"loginform.user"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-person-outline"},slot:"prepend"})],1)],1),t._v(" "),n("FormItem",{attrs:{prop:"password"}},[n("i-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.loginform.password,callback:function(e){t.$set(t.loginform,"password",e)},expression:"loginform.password"}},[n("Icon",{attrs:{slot:"prepend",type:"ios-lock-outline"},slot:"prepend"})],1)],1),t._v(" "),n("FormItem",[n("Button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.loading},on:{click:t.handleSubmit}},[t._v("登录")])],1)],1)],1)]),t._v(" "),n("div",{staticStyle:{width:"100%",height:"100%",position:"absolute",top:"0px"},attrs:{id:"bg"}})])},staticRenderFns:[]};var b=n("VU/8")(w,S,!1,function(t){n("YEr2")},"data-v-1a8ee678",null).exports,x={name:"Main",data:function(){return{loading:!0,currentMenu:"files",currentAccount:{userType:"",userName:""}}},methods:{onMenuSelected:function(t){this.$route.name!==t&&this.$router.push({name:t})},onDropdownClick:function(t){var e=this;"logout"==t&&_.logout().then(function(t){r.a.destroySession(),e.$router.push("/")}).catch(function(t){e.$Message.error(t.toString())})},doInitCurrentAccountInfo:function(){var t=this,e=r.a.getSession();e&&e.userID&&_.queryuser(e.userID).then(function(e){e&&t.$set(t,"currentAccount",e)}).catch(function(e){t.$Message.error(e.toString())})}},created:function(){this.currentMenu=this.$route.name,this.doInitCurrentAccountInfo()},watch:{$route:function(t,e){this.currentMenu=t.name}}},D={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"main-page",staticClass:"page"},[n("Layout",[n("Sider",{attrs:{width:"110"}},[n("div",{staticStyle:{padding:"8px","text-align":"center"}},[n("Dropdown",{attrs:{transfer:""},on:{"on-click":t.onDropdownClick}},[n("div",[n("Icon",{staticClass:"cs_p",style:{"font-size":"48px",color:"#c9ccd0"},attrs:{type:"md-flower"}}),t._v(" "),n("a",{staticClass:"d_block mg_b_5",staticStyle:{color:"rgb(201, 204, 208)","line-height":"20px"},attrs:{href:"javascript:void(0)"}},[t._v(t._s(t.currentAccount.userName))])],1),t._v(" "),n("Dropdown-Menu",{attrs:{slot:"list"},slot:"list"},[n("Dropdown-Item",{attrs:{name:"logout"}},[t._v("注销登录")])],1)],1)],1),t._v(" "),n("Menu",{attrs:{"active-name":t.currentMenu,theme:"dark",width:"auto"},on:{"on-select":t.onMenuSelected}},[n("Menu-Item",{attrs:{name:"files"}},[n("Icon",{attrs:{type:"ios-navigate"}}),t._v(" "),n("span",[t._v("文件")])],1),t._v(" "),n("Menu-Item",{attrs:{name:"settings"}},[n("Icon",{attrs:{type:"ios-settings"}}),t._v(" "),n("span",[t._v("设置")])],1)],1)],1),t._v(" "),n("Layout",[n("Content",{style:{background:"#fff",minHeight:"220px",height:"100%"}},[n("router-view")],1)],1)],1)],1)},staticRenderFns:[]};var E=n("VU/8")(x,D,!1,function(t){n("CjfL")},"data-v-2777ce80",null).exports,T=n("dzvC"),k=n("/u7W"),C={name:"uploadfile",props:["show-drawer","parent","drag-ref"],data:function(){return{isShowDrawer:!1,maxuploading:5,countuploading:0,dindex:0,files:[],queueend:!0}},methods:{doSelectFiels:function(t){var e=this,n=!1;m.a.addEvent(this.$refs.upload_selector_file,"change",function(t){if(t.target.files)for(var i=0;i<t.target.files.length;i++){var r=t.target.files[i];r._upload={base:e.parent,index:e.files.length,updater:!1,ps:0},n||(n=!0,e.$emit("on-start")),e.files.push(r),e.doStartUpload()}e.$refs.upload_selector_file.value=""},{once:!0}),m.a.triggerMouseEvent(this.$refs.upload_selector_file,"click")},doStartUpload:function(){var t=this;if(this.files&&this.files.length>0){if(this.countuploading>=this.maxuploading)return;if(this.dindex>=this.files.length)return void(this.queueend=!0);this.queueend&&(this.queueend=!1),this.countuploading++;var e=this.files[this.dindex++];if(e._upload.removed)return this.countuploading--,void this.$nextTick(this.doStartUpload);var n={form:{},header:{},progress:function(n){e._upload.ps=Math.round(n.loaded/n.total*1e3)/10,t.$set(t.files,e._upload.index,e)},error:function(n){e._upload.err=n?n.toString():"上传失败",t.$set(t.files,e._upload.index,e)},abort:function(n){e._upload.err="上传取消",t.$set(t.files,e._upload.index,e)},loadstart:function(t){},loadend:function(n){t.countuploading--,e._upload.ended=!0,t.$nextTick(function(){t.doStartUpload()})}};e._upload.started=!0,k.a.GetUploadUrl(e._upload.base+"/"+e.name).then(function(t){e._upload.updater=m.a.uploadByFormData(t,e,n),e._upload.updater.start()}).catch(function(t){console.error(t),n.error(t),n.loadend()})}},removeTask:function(t){var e=this.files[t];e&&(!e._upload.ended&&e._upload.started&&e._upload.updater.abort(),e._upload.removed=!0,this.$set(this.files,t,e))},doListenDrag:function(t){var e=this;this.$nextTick(function(){var n=void 0;t&&(e.$refs[t]?n=e.$refs[t]:e.$parent&&e.$parent.$refs&&(n=e.$parent.$refs[t])),n&&(n.ondrop=function(t){t.preventDefault();for(var n=!1,i=t.dataTransfer.files,r=0;r<i.length;r++){var o=i[r];(o.type||0!=o.size)&&(o._upload={base:e.parent,index:e.files.length,updater:!1,ps:0},n||(n=!0,e.$emit("on-start")),e.files.push(o),e.doStartUpload())}})})},stopDrop:function(){try{this.$el.ondrop=function(t){t.preventDefault(),t.stopPropagation()},this.$el.ondragover=function(t){t.preventDefault(),t.stopPropagation()},this.$el.ondragleave=function(t){t.preventDefault(),t.stopPropagation()},this.$el.ondragenter=function(t){t.preventDefault(),t.stopPropagation()},this.$el.oncontextmenu=function(t){t.preventDefault(),t.stopPropagation()}}catch(t){console.error(t)}}},created:function(){var t=this;this.$nextTick(function(){t.stopDrop(),t.doListenDrag("uploadDrag"),t.doListenDrag(t.dragRef)})},watch:{countuploading:function(t){t<=0&&this.dindex>=this.files.length&&this.$emit("on-end")},showDrawer:function(t){this.isShowDrawer=t}}},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Drawer",{attrs:{title:"上传文件",width:"450px"},on:{"on-close":function(e){return t.$emit("on-close")}},model:{value:t.isShowDrawer,callback:function(e){t.isShowDrawer=e},expression:"isShowDrawer"}},[n("div",{staticClass:"ivu-upload"},[n("div",{ref:"uploadDrag",staticClass:"ivu-upload ivu-upload-drag",on:{click:t.doSelectFiels}},[n("input",{ref:"upload_selector_file",staticClass:"ivu-upload-input",attrs:{type:"file",multiple:"multiple"}}),t._v(" "),n("div",{staticStyle:{padding:"20px 0px"}},[n("i",{staticClass:"ivu-icon ivu-icon-ios-cloud-upload",staticStyle:{"font-size":"52px",color:"rgb(51, 153, 255)"}}),t._v(" "),n("p",[t._v("点击或拖拽到此处")])])]),t._v(" "),n("ul",{staticClass:"ivu-upload-list"},t._l(t.files,function(e,i){return e._upload.removed?t._e():n("li",{key:i,staticClass:"ivu-upload-list-file"},[n("span",[t._v(t._s(e.name))]),t._v(" "),n("i",{staticClass:"ivu-icon ivu-icon-ios-close ivu-upload-list-remove",on:{click:function(n){return t.removeTask(e._upload.index)}}}),t._v(" "),n("div",{staticClass:"ivu-progress ivu-progress-normal ivu-progress-show-info"},[n("div",{staticClass:"ivu-progress-outer"},[n("div",{staticClass:"ivu-progress-inner"},[!e._upload.ps||e._upload.ps<100?n("div",{staticClass:"ivu-progress-bg",style:{width:(e._upload.ps?e._upload.ps:0)+"%",height:"2px"}}):n("div",{staticClass:"ivu-progress-success-bg",staticStyle:{width:"100%",height:"2px"}})])]),t._v(" "),n("span",{staticClass:"ivu-progress-text"},[n("span",{staticClass:"ivu-progress-text-inner",style:{color:e._upload.err?"#b42525":"#515a6e"}},[t._v(t._s(e._upload.err?e._upload.err:e._upload.ps+"%"))])])])])}),0)])])},staticRenderFns:[]};var R=n("VU/8")(C,P,!1,function(t){n("bMA1")},"data-v-51afdfed",null).exports,A={name:"copyfile",props:{showDailog:{type:Boolean,default:!1},srcPaths:{type:Array,default:function(){return[]}},destPath:{type:String,default:"/"},copySettings:{type:Object,default:function(){return{ignore:!1,replace:!1,width:450}}}},data:function(){return{isShowDailog:!1,operations:{stop:"discontinue",ignore:"ignore",ignoreall:"ignoreall",replace:"replace",replaceall:"replaceall"},operationData:{multiCount:0,opCount:0,token:"",srcPaths:[],destPath:"",nowSrcPath:"",nowDstPath:""},copyError:{IsError:!1,Error:"",IsExist:!1}}},methods:{doCopy:function(){var t=this;if(this.operationData.srcPaths&&this.operationData.srcPaths.length>0){var e=this.operationData.srcPaths[this.operationData.srcPaths.length-1],n=this.operationData.destPath+"/"+e.path.getName().parsePath();k.a.CopyAsync(e.path,n,this.copySettings.replace,this.copySettings.ignore).then(function(e){t.operationData.srcPaths.length>1?t.operationData.srcPaths=t.operationData.srcPaths.slice(0,t.operationData.srcPaths.length-1):t.operationData.srcPaths=[],t.operationData.token=e}).catch(function(e){t.$Message.error(e.toString()),t.$emit("on-error")})}},doRefreshPs:function(){var t=this;this.operationData.token&&""!=this.operationData.token&&k.a.AsyncExecToken("CopyFile",this.operationData.token).then(function(e){if(e.CountIndex>0&&(t.operationData.opCount=e.CountIndex),e.IsComplete)return t.operationData.token="",void(e.IsDiscontinue?(t.isShowDailog=!1,t.$Message.error("复制已终止"),t.$emit("on-stop")):t.operationData.srcPaths&&0!=t.operationData.srcPaths.length?(t.operationData.multiCount+=t.operationData.opCount,t.doCopy()):(t.isShowDailog=!1,e.ErrorString&&e.ErrorString.length>0?t.$Message.error(e.ErrorString):t.$Message.success("复制完成"),t.$emit("on-end")));t.operationData.nowSrcPath=e.Src,t.operationData.nowDstPath=e.Dst,t.copyError.IsError=!!(e.ErrorString&&e.ErrorString.length>0),t.copyError.Error=t.parseError(e),t.copyError.IsExist=e.IsDstExist,setTimeout(function(){t.doRefreshPs()},100)}).catch(function(e){t.$Message.error(e.toString())})},doStop:function(){var t=this;this.operationData.token&&this.operationData.token.length>0&&k.a.AsyncExecToken("CopyFile",this.operationData.token,{operation:this.operations.stop}).then(function(e){t.operationData.opCount=0,t.operationData.multiCount=0,t.operationData.srcPaths=[],t.operationData.destPath=[]}).catch(function(e){t.$Message.error(e.toString())})},doIgnore:function(){var t=this;this.operationData.token&&""!=this.operationData.token&&k.a.AsyncExecToken("CopyFile",this.operationData.token,{operation:this.copySettings.ignore?this.operations.ignoreall:this.operations.ignore}).then(function(t){}).catch(function(e){t.$Message.error(e.toString())})},doReplace:function(){var t=this;this.operationData.token&&""!=this.operationData.token&&k.a.AsyncExecToken("CopyFile",this.operationData.token,{operation:this.copySettings.replace?this.operations.replaceall:this.operations.replace}).then(function(t){}).catch(function(e){t.$Message.error(e.toString())})},parseError:function(t){return t&&t.ErrorString?t.IsDstExist?"目标位置已存在: "+t.Dst:t.IsSrcExist?t.ErrorString:"源目录不存在: "+t.Src:""}},watch:{"operationData.token":function(t,e){t&&""!=t&&this.doRefreshPs()},showDailog:function(t,e){t&&(this.copyError.IsError=!1,this.copyError.Error="",this.copyError.IsExist=!1,this.copySettings.ignore=!1,this.copySettings.replace=!1,this.operationData.opCount=0,this.operationData.multiCount=0,this.operationData.showDailog=t,this.operationData.srcPaths=this.srcPaths,this.operationData.destPath=this.destPath,this.doCopy()),this.isShowDailog=t}}},F={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{closable:!1,"mask-closable":!1,width:t.copySettings.width},model:{value:t.isShowDailog,callback:function(e){t.isShowDailog=e},expression:"isShowDailog"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("span",[t._v("复制文件")])]),t._v(" "),n("div",{staticStyle:{"text-align":"left"}},[n("div",[n("table",[n("tr",[n("td",[t._v("正在处理:")]),t._v(" "),n("td",[t._v(t._s(t.operationData.multiCount+t.operationData.opCount))])]),t._v(" "),n("tr",[n("td",{attrs:{width:"30%"}},[t._v("复制路径:")]),t._v(" "),n("td",[t._v(t._s(t.operationData.nowSrcPath))])]),t._v(" "),n("tr",[n("td",[t._v("目标位置:")]),t._v(" "),n("td",[t._v(t._s(t.operationData.nowDstPath))])]),t._v(" "),n("tr",{directives:[{name:"show",rawName:"v-show",value:t.copyError.IsError,expression:"copyError.IsError"}]},[n("td",[t._v("出现错误:")]),t._v(" "),n("td",[t._v(t._s(t.copyError.Error))])])])])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.copyError.IsError,expression:"copyError.IsError"}]},[n("Button",{style:{margin:"5px 2px"},attrs:{long:""},on:{click:t.doIgnore}},[t._v("跳过")]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.copyError.IsExist,expression:"copyError.IsExist"}],style:{margin:"5px 2px"},attrs:{long:""},on:{click:t.doReplace}},[t._v("覆盖")]),t._v(" "),n("div",{staticStyle:{margin:"8px 0px",color:"#57a3f3"}},[n("Checkbox",{model:{value:t.copySettings.ignore,callback:function(e){t.$set(t.copySettings,"ignore",e)},expression:"copySettings.ignore"}},[t._v("自动跳过出错文件")]),t._v(" "),n("Checkbox",{directives:[{name:"show",rawName:"v-show",value:t.copyError.IsExist,expression:"copyError.IsExist"}],model:{value:t.copySettings.replace,callback:function(e){t.$set(t.copySettings,"replace",e)},expression:"copySettings.replace"}},[t._v("自动覆盖重复文件")])],1)],1),t._v(" "),n("Button",{style:{margin:"5px 2px"},attrs:{type:"error",long:""},on:{click:t.doStop}},[t._v("终止")])],1)])},staticRenderFns:[]};var I=n("VU/8")(A,F,!1,function(t){n("YjBe")},"data-v-ec9c6bda",null).exports,M={name:"movefile",props:{showDailog:{type:Boolean,default:!1},srcPaths:{type:Array,default:function(){return[]}},destPath:{type:String,default:"/"},moveSettings:{type:Object,default:function(){return{ignore:!1,replace:!1,width:450}}}},data:function(){return{isShowDailog:!1,operations:{stop:"discontinue",ignore:"ignore",ignoreall:"ignoreall",replace:"replace",replaceall:"replaceall"},operationData:{multiCount:0,opCount:0,token:"",srcPaths:[],destPath:"",nowSrcPath:"",nowDstPath:""},moveError:{IsError:!1,Error:"",IsExist:!1}}},created:function(){},methods:{doMove:function(){var t=this;if(this.operationData.srcPaths&&this.operationData.srcPaths.length>0){var e=this.operationData.srcPaths[this.operationData.srcPaths.length-1],n=this.operationData.destPath+"/"+e.path.getName().parsePath();k.a.MoveAsync(e.path,n,this.moveSettings.replace,this.moveSettings.ignore).then(function(e){t.operationData.srcPaths.length>1?t.operationData.srcPaths=t.operationData.srcPaths.slice(0,t.operationData.srcPaths.length-1):t.operationData.srcPaths=[],t.operationData.token=e}).catch(function(e){t.$Message.error(e.toString()),t.$emit("on-error")})}},doRefreshPs:function(){var t=this;this.operationData.token&&""!=this.operationData.token&&k.a.AsyncExecToken("MoveFile",this.operationData.token).then(function(e){if(e.CountIndex>0&&(t.operationData.opCount=e.CountIndex),e.IsComplete)return t.operationData.token="",void(e.IsDiscontinue?(t.isShowDailog=!1,t.$Message.error("移动已终止"),t.$emit("on-stop")):t.operationData.srcPaths&&0!=t.operationData.srcPaths.length?(t.operationData.multiCount+=t.operationData.opCount,t.doMove()):(t.isShowDailog=!1,e.ErrorString&&e.ErrorString.length>0?t.$Message.error(e.ErrorString):t.$Message.success("移动完成"),t.$emit("on-end")));t.operationData.nowSrcPath=e.Src,t.operationData.nowDstPath=e.Dst,t.moveError.IsError=!!(e.ErrorString&&e.ErrorString.length>0),t.moveError.Error=t.parseError(e),t.moveError.IsExist=e.IsDstExist,setTimeout(function(){t.doRefreshPs()},100)}).catch(function(e){t.$Message.error(e.toString())})},doStop:function(){var t=this;this.operationData.token&&this.operationData.token.length>0&&k.a.AsyncExecToken("MoveFile",this.operationData.token,{operation:this.operations.stop}).then(function(e){t.operationData.opCount=0,t.operationData.multiCount=0,t.operationData.srcPaths=[],t.operationData.destPath=[]}).catch(function(e){t.$Message.error(e.toString())})},doIgnore:function(){var t=this;this.operationData.token&&""!=this.operationData.token&&k.a.AsyncExecToken("MoveFile",this.operationData.token,{operation:this.moveSettings.ignore?this.operations.ignoreall:this.operations.ignore}).then(function(t){}).catch(function(e){t.$Message.error(e.toString())})},doReplace:function(){var t=this;this.operationData.token&&""!=this.operationData.token&&k.a.AsyncExecToken("MoveFile",this.operationData.token,{operation:this.moveSettings.replace?this.operations.replaceall:this.operations.replace}).then(function(t){}).catch(function(e){t.$Message.error(e.toString())})},parseError:function(t){return t&&t.ErrorString?t.IsDstExist?"目标位置已存在: "+t.Dst:t.IsSrcExist?t.ErrorString:"源目录不存在: "+t.Src:""}},watch:{"operationData.token":function(t,e){t&&""!=t&&this.doRefreshPs()},showDailog:function(t,e){t&&(this.moveError.IsError=!1,this.moveError.Error="",this.moveError.IsExist=!1,this.moveSettings.ignore=!1,this.moveSettings.replace=!1,this.operationData.opCount=0,this.operationData.multiCount=0,this.operationData.showDailog=t,this.operationData.srcPaths=this.srcPaths,this.operationData.destPath=this.destPath,this.doMove()),this.isShowDailog=t}}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{closable:!1,"mask-closable":!1,width:t.moveSettings.width},model:{value:t.isShowDailog,callback:function(e){t.isShowDailog=e},expression:"isShowDailog"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("span",[t._v("移动文件")])]),t._v(" "),n("div",{staticStyle:{"text-align":"left"}},[n("div",[n("table",[n("tr",[n("td",[t._v("正在处理:")]),t._v(" "),n("td",[t._v(t._s(t.operationData.multiCount+t.operationData.opCount))])]),t._v(" "),n("tr",[n("td",{attrs:{width:"30%"}},[t._v("移动路径:")]),t._v(" "),n("td",[t._v(t._s(t.operationData.nowSrcPath))])]),t._v(" "),n("tr",[n("td",[t._v("目标位置:")]),t._v(" "),n("td",[t._v(t._s(t.operationData.nowDstPath))])]),t._v(" "),n("tr",{directives:[{name:"show",rawName:"v-show",value:t.moveError.IsError,expression:"moveError.IsError"}]},[n("td",[t._v("出现错误:")]),t._v(" "),n("td",[t._v(t._s(t.moveError.Error))])])])])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.moveError.IsError,expression:"moveError.IsError"}]},[n("Button",{style:{margin:"5px 2px"},attrs:{long:""},on:{click:t.doIgnore}},[t._v("跳过")]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.moveError.IsExist,expression:"moveError.IsExist"}],style:{margin:"5px 2px"},attrs:{long:""},on:{click:t.doReplace}},[t._v("覆盖")]),t._v(" "),n("div",{staticStyle:{margin:"8px 0px",color:"#57a3f3"}},[n("Checkbox",{model:{value:t.moveSettings.ignore,callback:function(e){t.$set(t.moveSettings,"ignore",e)},expression:"moveSettings.ignore"}},[t._v("自动跳过出错文件")]),t._v(" "),n("Checkbox",{directives:[{name:"show",rawName:"v-show",value:t.moveError.IsExist,expression:"moveError.IsExist"}],model:{value:t.moveSettings.replace,callback:function(e){t.$set(t.moveSettings,"replace",e)},expression:"moveSettings.replace"}},[t._v("自动覆盖重复文件")])],1)],1),t._v(" "),n("Button",{style:{margin:"5px 2px"},attrs:{type:"error",long:""},on:{click:t.doStop}},[t._v("终止")])],1)])},staticRenderFns:[]};var O=n("VU/8")(M,B,!1,function(t){n("h4ME")},"data-v-5e0c9b54",null).exports,L=n("rIwW"),$={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{title:t.selectFile?"选择文件":"选择目录",width:t.fsSettings.width},on:{"on-ok":t.onOk,"on-cancel":t.onCancel},model:{value:t.isShowDailog,callback:function(e){t.isShowDailog=e},expression:"isShowDailog"}},[n("div",{staticStyle:{height:"30px","line-height":"30px","padding-left":"5px"}},[t.fsStatus.loadedPath&&t.fsStatus.loadedPath.length>0?n("fileAdress",{attrs:{depth:4,rootname:t.fsSettings.rootname,path:t.fsStatus.loadedPath},on:{click:t.goToPath}}):t._e()],1),t._v(" "),n("Table",{attrs:{loading:t.fsStatus.fsLoading,columns:t.fsColumns,data:t.fsData,height:t.fsSettings.height},on:{"on-row-click":t.onRowClick,"on-selection-change":t.onSelectionChange}})],1)},staticRenderFns:[]};var N=function(t){n("LFj0")},U=n("VU/8")(L.a,$,!1,N,"data-v-9b1cb1a6",null).exports,H=n("eijq"),z=n("mvHQ"),V=n.n(z),W={$TYPE:{VISIBLECHILD:{name:"子节点可见",value:0},VISIBLE:{name:"可见",value:1},READ:{name:"只读",value:2},WRITE:{name:"可写",value:3}},listFPermissions:function(){return r.a.apiGet("/filepms/v1/listfpermissions",{})},GetUserPermissionSum:function(t,e){return r.a.apiPost("/filepms/v1/getuserpermissionsum",{userid:t||"",paths:e?V()(e):""})},listUserFPermissions:function(t){return r.a.apiGet("/filepms/v1/listuserfpermissions",{userid:t||""})},addFPermission:function(t,e,n){return r.a.apiPost("/filepms/v1/addfpermission",{userid:t||"",path:e||"",permission:n||""})},delFPermission:function(t){return r.a.apiDelete("/filepms/v1/delfpermission",{permissionid:t||""})},updateFPermission:function(t,e){return r.a.apiPost("/filepms/v1/updatefpermission",{permissionid:t||"",permission:e||""})},sync:{delFPermission:function(t){return r.a.apiDeleteSync("/filepms/v1/delfpermission",{permissionid:t||""})}}};W.$TYPE.__proto__={sumInclude:function(t,e){return t=Number(t),e=Number(e),!(void 0==t||t<0||void 0==e||e<0)&&1<<e==(t&1<<e)},sum2Name:function(t){var e=[];if(void 0!=t&&t>0)for(var n in W.$TYPE)n!=W.$TYPE.VISIBLECHILD.name&&W.$TYPE.hasOwnProperty(n)&&W.$TYPE.sumInclude(t,W.$TYPE[n].value)&&e.push(W.$TYPE[n].name);return 0==e.length&&W.$TYPE.sumInclude(t,W.$TYPE.VISIBLECHILD.value)&&e.push(W.$TYPE.VISIBLECHILD.name),e},list2Sum:function(t){var e=-1;if(t&&t.length>0)for(var n=0;n<t.length;n++)e+=1<<Number(t[n]);return e}};var j={supported:{audio:["mp3","flac"],video:["mp4","mov"],picture:["png","gif","jpg","bmp","jpeg","icon"]},askToken:function(t){return r.a.apiGet("/filepreview/v1/asktoken",{path:t||""})},status:function(t){return r.a.apiGet("/filepreview/v1/status/"+t)},samedirFiles:function(t){return r.a.apiGet("/filepreview/v1/samedirfiles/"+t)},buildStreamURL:function(t,e){return r.a.buildAPIURL("/filepreview/v1/stream/"+t+"?fileName="+encodeURI(e||""))},doPreview:function(t,e){return new y.a(function(n,i){j.askToken(t).then(function(i){j.openPreview(i,e?e.toLowerCase():t.getSuffixed(!1).toLowerCase()),n()}).catch(i)})},openPreview:function(t,e){var n="";if(j.isSupport("audio",e))n="audio";else if(j.isSupport("video",e))n="video";else{if(!j.isSupport("picture",e))throw"不支持预览该文件";n="picture"}window.open("#/preview/"+n+"?token="+t)},isSupport:function(t,e){return e=e.toLowerCase(),t&&e&&j.supported[t]&&j.supported[t].indexOf(e)>-1}},q={name:"FileList",components:{fileAddress:T.a,uploadfile:R,copyfile:I,movefile:O,fileSelector:U,fileicon:H.a},data:function(){var t=this;return{tableHeight:500,searchText:"",fsCopyFile:{showDailog:!1,srcPaths:[],destPath:"",copySettings:{ignore:!1,replace:!1}},fsMoveFile:{showDailog:!1,srcPaths:[],destPath:"",moveSettings:{ignore:!1,replace:!1}},fsSelector:{operationObj:!1,showDailog:!1,selectFile:!0,selectDir:!0,selectMuti:!0,startPath:"/"},fsAddress:{rootPath:"/",rootname:"根目录",loadPath:""},fsUpload:{showDrawer:!1},loading:!1,fsColumns:[{type:"selection",width:60,align:"center"},{title:"文件名称",key:"path",render:function(e,n){return e(H.a,{props:{node:n.row,editMode:!!n.row.showRename},on:{click:t.doOpen,rename:function(e,i){t.onRenameAfter(n.index,n.row,i)}}})}},{title:"修改时间",key:"mtime",maxWidth:160,render:function(t,e){return t("span",m.a.long2Time(e.row.mtime))}},{title:"文件大小",key:"size",maxWidth:160,render:function(t,e){if(e.row.isFile)return t("span",m.a.formatSize(e.row.size));t("span","")}},{title:"操作权限",key:"PermissionText",maxWidth:280}],fsData:[],fsData_All:[],fsData_Total:0,fsData_PageSize:40,fsData_CurrentPageIndex:1,permissionsMap:{},fsOperationButtons:{refresh:{name:"刷新",show:!0,handler:function(){t.doRefresh()},icon:"ivu-icon ivu-icon-md-refresh-circle",divided:!1},upload:{name:"上传",show:!1,handler:function(){t.fsUpload.showDrawer=!0},icon:"ivu-icon ivu-icon-md-cloud-upload",divided:!1},newFolder:{name:"文件夹",show:!1,handler:function(){t.onNewFolder()},icon:"ivu-icon ivu-icon-md-add-circle",divided:!1},download:{name:"下载",show:!1,handler:function(){t.doDownload()},icon:"ivu-icon ivu-icon-md-download",divided:!1},rename:{name:"重命名",show:!1,handler:function(){t.onRename()},icon:"ivu-icon ivu-icon-ios-create",divided:!1},move:{name:"移动",show:!1,handler:function(){t.doMove()},icon:"ivu-icon ivu-icon-md-move",divided:!1},copy:{name:"复制",show:!1,handler:function(){t.doCopy()},icon:"ivu-icon ivu-icon-ios-copy",divided:!1},delete:{name:"删除",show:!1,handler:function(){t.onDelete()},icon:"ivu-icon ivu-icon-md-trash",divided:!1}}}},computed:{},methods:{doRefresh:function(){this.doLoadData(this.fsAddress.loadPath)},doLoadData:function(t){var e=this;this.loading||(this.loading=!0,this.onSelectionChange([],{}),this.fsData_All=[],this.fsData=[],k.a.List(t).then(function(t){e.fsData_All=t,e.fsData_CurrentPageIndex=1,e.loadDatePage()}).catch(function(t){console.error(t),e.loading=!1,e.$Message.error(t.toString())}))},loadDatePage:function(t){var e=[];if(this.searchText)for(var n=this.searchText.toLowerCase(),i=0;i<this.fsData_All.length;i++)this.fsData_All[i].path.getName().toLowerCase().indexOf(n)>-1&&e.push(this.fsData_All[i]);else e=this.fsData_All;this.fsData_Total=e.length,this.fsData_CurrentPageIndex=t||1;var r=this.fsData_CurrentPageIndex*this.fsData_PageSize,o=(this.fsData_CurrentPageIndex-1)*this.fsData_PageSize,a=e.slice(o>0?o:0,r);this.doWarpPermission(a)},doWarpPermission:function(t){var e=this;this.permissionsMap={};var n=[this.fsAddress.loadPath];t.forEach(function(t){n.push(t.path)}),W.GetUserPermissionSum(r.a.getSession().userID,n).then(function(n){e.permissionsMap=n||{};for(var i=0;i<t.length;i++)t[i].Permission=void 0!=e.permissionsMap[t[i].path]?e.permissionsMap[t[i].path]:-1,t[i].PermissionText=W.$TYPE.sum2Name(t[i].Permission).join(", ");e.fsData=t,e.onSelectionChange(),e.loading=!1}).catch(function(t){e.loading=!1,e.$Message.error(t.toString())})},doRename:function(t,e,n){var i=this;e.showRename=!1,this.$set(this.fsData,t,e),n&&e.path.getName()!=n&&k.a.Rename(e.path,n).then(function(){i.$Message.info("操作成功"),i.doRefresh()}).catch(function(t){i.$Message.error("操作失败: "+t.toString()),i.doRefresh()})},doNewFolder:function(t,e,n){var i=this;n?k.a.NewFolder(this.fsAddress.loadPath+"/"+n).then(function(){i.$Message.info("操作成功"),i.doRefresh()}).catch(function(t){i.$Message.error("操作失败: "+t.toString()),i.doRefresh()}):this.doRefresh()},onDelete:function(){var t=this;this.$Modal.confirm({title:"删除文件",content:"此操作不可逆, 是否继续删除?",onOk:function(){t.doDelete()}})},doDelete:function(){var t=this,e=this.$refs.fsSelection.getSelection();if(e&&0!=e.length){var n=this.$Message.loading({content:"正在删除...",duration:0}),i=[];!function r(o){if(o||(o=0),o==e.length)return n(),t.doRefresh(),void(i&&i.length>0&&t.$Message.error({content:i.join("</br>"),duration:5}));k.a.Delete(e[o].path).then(function(){setTimeout(function(){r(++o)})}).catch(function(t){i.push(e[o].path+"删除失败: "+t),r(++o)})}(0)}},doCopy:function(){this.fsCopyFile.srcPaths=this.$refs.fsSelection.getSelection(),this.fsSelector.operationObj=this.fsCopyFile,this.fsSelector.selectFile=!1,this.fsSelector.selectDir=!0,this.fsSelector.selectMuti=!1,this.fsSelector.startPath=this.fsAddress.loadPath,this.fsSelector.showDailog=!0},doMove:function(){this.fsMoveFile.srcPaths=this.$refs.fsSelection.getSelection(),this.fsSelector.operationObj=this.fsMoveFile,this.fsSelector.selectFile=!1,this.fsSelector.selectDir=!0,this.fsSelector.selectMuti=!1,this.fsSelector.startPath=this.fsAddress.loadPath,this.fsSelector.showDailog=!0},doDownload:function(){var t=this,e=this.$refs.fsSelection.getSelection();if(e&&0!=e.length)for(var n=function(n){if(!e[n].isFile)return"continue";k.a.GetDownloadUrl(e[n].path).then(function(e){t.$nextTick(function(){var t=document.createElement("iframe");t.src=e,document.body.appendChild(t)})}).catch(function(i){t.$Message.error("操作失败: "+e[n].path+", "+i.toString())})},i=e.length-1;i>=0;i--)n(i)},onRename:function(){var t=this.$refs.fsSelection.getSelection();if(t&&0!=t.length){t[0].showRename=!0;for(var e=0;e<this.fsData.length;e++)this.fsData[e].path==t[0].path&&this.$set(this.fsData,e,t[0])}},doOpen:function(t){var e=this;t.isFile?j.doPreview(t.path).catch(function(n){k.a.GetSteamUrl(t.path).then(function(t){e.$nextTick(function(){window.open(t)})}).catch(function(n){e.$Message.error("操作失败: "+t.path+", "+n.toString())})}):this.goToPath(t.path)},onRenameAfter:function(t,e,n){e.IsNewFolder?this.doNewFolder(t,e,n):this.doRename(t,e,n)},onNewFolder:function(){var t=this.fsData;t.unshift({path:"",isFile:!1,IsNewFolder:!0,showRename:!0}),this.$set(this,"fsData",t)},onSelectedFile:function(t){this.fsSelector.showDailog=!1,t&&t[0]&&t[0].path&&t[0].path.length>0&&this.fsSelector.operationObj&&(this.fsSelector.operationObj.destPath=t[0].path,this.fsSelector.operationObj.showDailog=!0)},onSelectCancel:function(){this.fsSelector.showDailog=!1},onHiddenCopy:function(){this.fsCopyFile.showDailog=!1},onHiddenMove:function(){this.fsMoveFile.showDailog=!1,this.doRefresh()},goToPath:function(t){this.fsAddress.loadPath!=t?this.fsAddress.loadPath=t:this.doLoadData(t)},onRowClick:function(t,e){for(var n=0;n<this.fsData.length;n++)this.fsData[n]._checked&&e!=n&&this.$set(this.fsData[n],"_checked",!1);this.$set(this.fsData[e],"_checked",!0),this.onSelectionChange([t],t)},onSelectionChange:function(t,e){this.fsOperationButtons.upload.show=!1,this.fsOperationButtons.newFolder.show=!1,this.fsOperationButtons.download.show=!1,this.fsOperationButtons.rename.show=!1,this.fsOperationButtons.delete.show=!1,this.fsOperationButtons.move.show=!1,this.fsOperationButtons.copy.show=!1;var n=t?t.length:0;if(void 0!=this.permissionsMap[this.fsAddress.loadPath]&&W.$TYPE.sumInclude(this.permissionsMap[this.fsAddress.loadPath],W.$TYPE.WRITE.value)&&(this.fsOperationButtons.upload.show=!0,this.fsOperationButtons.newFolder.show=!0),n>=1){for(var i=!1,r=0,o=0;o<t.length;o++)if(t[o].isFile&&r++,!(i=W.$TYPE.sumInclude(t[o].Permission,W.$TYPE.READ.value))){i=!1;break}i&&(this.fsOperationButtons.download.show=r==t.length,this.fsOperationButtons.copy.show=!0);for(var a=!1,s=0;s<t.length;s++)if(!(a=W.$TYPE.sumInclude(t[s].Permission,W.$TYPE.WRITE.value))){a=!1;break}a&&(this.fsOperationButtons.rename.show=1==n,this.fsOperationButtons.move.show=!0,this.fsOperationButtons.delete.show=!0)}},initAreaCover:function(){var t=this;this.$nextTick(function(){m.a.areaCover({background:t.$refs.fsSelection.$el,coverfilter:".ivu-table-row",onCover:function(t){t.querySelector(".ivu-checkbox-input").checked||t.querySelector(".ivu-checkbox-input").click()},onUnCover:function(t){t.querySelector(".ivu-checkbox-input").checked&&t.querySelector(".ivu-checkbox-input").click()}})})}},mounted:function(){},created:function(){this.initAreaCover(),this.goToPath(this.$route.query.path||this.fsAddress.rootPath)},watch:{"fsAddress.loadPath":function(t,e){this.doLoadData(t)}}},G={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"filelist-page",staticClass:"page"},[n("div",{ref:"fslist-body",staticClass:"file-list",staticStyle:{height:"100%"}},[n("div",{staticStyle:{padding:"5px 20px 5px 5px","border-bottom":"1px solid #dcdee2"}},[n("div",[n("Button",{directives:[{name:"show",rawName:"v-show",value:t.fsOperationButtons.refresh.show,expression:"fsOperationButtons.refresh.show"}],attrs:{type:"text",icon:t.fsOperationButtons.refresh.icon},on:{click:t.fsOperationButtons.refresh.handler}},[t._v(t._s(t.fsOperationButtons.refresh.name))]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.fsOperationButtons.upload.show,expression:"fsOperationButtons.upload.show"}],attrs:{type:"text",icon:t.fsOperationButtons.upload.icon},on:{click:t.fsOperationButtons.upload.handler}},[t._v(t._s(t.fsOperationButtons.upload.name))]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.fsOperationButtons.newFolder.show,expression:"fsOperationButtons.newFolder.show"}],attrs:{type:"text",icon:t.fsOperationButtons.newFolder.icon},on:{click:t.fsOperationButtons.newFolder.handler}},[t._v(t._s(t.fsOperationButtons.newFolder.name))]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.fsOperationButtons.download.show,expression:"fsOperationButtons.download.show"}],attrs:{type:"text",icon:t.fsOperationButtons.download.icon},on:{click:t.fsOperationButtons.download.handler}},[t._v(t._s(t.fsOperationButtons.download.name))]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.fsOperationButtons.rename.show,expression:"fsOperationButtons.rename.show"}],attrs:{type:"text",icon:t.fsOperationButtons.rename.icon},on:{click:t.fsOperationButtons.rename.handler}},[t._v(t._s(t.fsOperationButtons.rename.name))]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.fsOperationButtons.move.show,expression:"fsOperationButtons.move.show"}],attrs:{type:"text",icon:t.fsOperationButtons.move.icon},on:{click:t.fsOperationButtons.move.handler}},[t._v(t._s(t.fsOperationButtons.move.name))]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.fsOperationButtons.copy.show,expression:"fsOperationButtons.copy.show"}],attrs:{type:"text",icon:t.fsOperationButtons.copy.icon},on:{click:t.fsOperationButtons.copy.handler}},[t._v(t._s(t.fsOperationButtons.copy.name))]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.fsOperationButtons.delete.show,expression:"fsOperationButtons.delete.show"}],attrs:{type:"text",icon:t.fsOperationButtons.delete.icon},on:{click:t.fsOperationButtons.delete.handler}},[t._v(t._s(t.fsOperationButtons.delete.name))])],1)]),t._v(" "),n("div",{staticStyle:{height:"40px","line-height":"40px",padding:"0px 5px 0px 20px",overflow:"hidden"}},[n("fileAddress",{staticStyle:{float:"left","max-width":"calc(100% - 250px)"},attrs:{rootname:t.fsAddress.rootname,path:t.fsAddress.loadPath},on:{click:t.goToPath}}),t._v(" "),n("i-input",{staticStyle:{float:"right","max-width":"240px",padding:"4px 0px"},attrs:{placeholder:"Enter file name"},on:{"on-enter":function(e){return t.loadDatePage(1)}},model:{value:t.searchText,callback:function(e){t.searchText=e},expression:"searchText"}})],1),t._v(" "),n("Table",{directives:[{name:"watch-height",rawName:"v-watch-height",value:function(e,n){return t.tableHeight=n-130},expression:"(ch, ph) => (tableHeight = ph - 130)"}],ref:"fsSelection",attrs:{height:t.tableHeight,loading:t.loading,columns:t.fsColumns,data:t.fsData,"highlight-row":!0},on:{"on-row-click":t.onRowClick,"on-selection-change":t.onSelectionChange}}),t._v(" "),n("Page",{staticStyle:{"line-height":"45px",background:"#fff",float:"right",padding:"0px 45px"},attrs:{"show-total":"",total:t.fsData_Total,size:"small",current:t.fsData_CurrentPageIndex,"page-size":t.fsData_PageSize},on:{"on-change":t.loadDatePage}}),t._v(" "),n("uploadfile",{attrs:{"show-drawer":t.fsUpload.showDrawer,parent:t.fsAddress.loadPath,"drag-ref":"fslist-body"},on:{"on-end":function(e){t.$Message.info("上传完毕"),t.doRefresh()},"on-start":function(e){return t.$Message.info("开始上传")},"on-close":function(e){t.fsUpload.showDrawer=!1}}}),t._v(" "),n("copyfile",{attrs:{"src-paths":t.fsCopyFile.srcPaths,"dest-path":t.fsCopyFile.destPath,"copy-settings":t.fsCopyFile.copySettings,"show-dailog":t.fsCopyFile.showDailog},on:{"on-error":t.onHiddenCopy,"on-stop":t.onHiddenCopy,"on-end":t.onHiddenCopy}}),t._v(" "),n("movefile",{attrs:{"src-paths":t.fsMoveFile.srcPaths,"dest-path":t.fsMoveFile.destPath,"move-settings":t.fsMoveFile.moveSettings,"show-dailog":t.fsMoveFile.showDailog},on:{"on-error":t.onHiddenMove,"on-stop":t.onHiddenMove,"on-end":t.onHiddenMove}}),t._v(" "),n("fileSelector",{attrs:{"select-muti":t.fsSelector.selectMuti,"select-file":t.fsSelector.selectFile,"select-dir":t.fsSelector.selectDir,"start-path":t.fsSelector.startPath,"show-dailog":t.fsSelector.showDailog},on:{"on-select":t.onSelectedFile,"on-cancel":t.onSelectCancel}}),t._v(" "),n("right-click-menu",{attrs:{"bind-ref":"fsSelection",menus:t.fsOperationButtons}})],1)])},staticRenderFns:[]};var X=n("VU/8")(q,G,!1,function(t){n("vRLG")},"data-v-8e8d9d10",null).exports,Y={name:"MyInfo",data:function(){return{user:{userID:"",userType:"",userTypeDesc:"",userName:"",ctTime:""},ruleValidate:{userName:[{required:!0}]}}},methods:{onUserNameonEnter:function(){var t=this;this.user.userName?_.updateUserName(this.user.userID,this.user.userName).then(function(e){t.$Message.info("操作成功"),t.loadCurrentAccountInfo()}).catch(function(e){t.$Message.error("操作失败"),t.loadCurrentAccountInfo()}):this.$Message.error("不能为空")},onUpdataPWD:function(){var t=this,e="";this.$Modal.info({title:"更改密码",render:function(t){return t("i-input",{props:{type:"password",value:"",autofocus:!0,placeholder:"Please enter your password..."},on:{input:function(t){e=t}}})},onOk:function(){var n=this;_.updateUserPwd(t.user.userID,e).then(function(t){n.$Message.info("操作成功")}).catch(function(t){n.$Message.error("操作失败")})}})},loadCurrentAccountInfo:function(){var t=this,e=r.a.getSession();e&&e.userID&&_.queryuser(e.userID).then(function(e){e&&(t.user.userID=e.userID,t.user.userType=e.userType,t.user.userTypeDesc=_.$TYPES.parse(e.userType),t.user.userName=e.userName,t.user.ctTime=e.ctTime,t.$emit("user-changed",t.user))}).catch(function(e){console.error(e),t.$Message.error(e.toString())})}},created:function(){this.loadCurrentAccountInfo()}},K={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Form",{staticStyle:{padding:"10px"},attrs:{name:"accountform","label-position":"left","label-width":80}},[n("FormItem",{staticClass:"mg_b_10",attrs:{label:"用户名: "}},[n("i-input",{staticStyle:{"max-width":"200px"},attrs:{placeholder:"Enter your name"},on:{"on-enter":t.onUserNameonEnter},model:{value:t.user.userName,callback:function(e){t.$set(t.user,"userName",e)},expression:"user.userName"}})],1),t._v(" "),n("FormItem",{staticClass:"mg_b_10",attrs:{label:"密码: "}},[n("a",{attrs:{href:"javascript:void(0);"},on:{click:t.onUpdataPWD}},[t._v("更改密码")])]),t._v(" "),n("FormItem",{staticClass:"mg_b_10",attrs:{label:"用户类型: "}},[t._v("\n    "+t._s(t.user.userTypeDesc)+"\n  ")]),t._v(" "),n("FormItem",{staticClass:"mg_b_10",attrs:{label:"创建时间: "}},[t._v("\n    "+t._s(t.user.ctTime)+"\n  ")])],1)},staticRenderFns:[]};var Z={name:"UserList",data:function(){return{loading:!1,tableHeaght:500,datas:[],currentPageIndex:1,pageSize:60,shows:{add:!0,del:!1,edit:!1},userEdit:{show:!1,isAdd:!1,userID:"",userType:"",userName:"",userPWD:""},columns:[{type:"selection",width:60,align:"center"},{title:"用户名",key:"userName"},{title:"用户类型",key:"userTypeDesc"},{title:"新建时间",key:"ctTime"}]}},computed:{calcPageDatas:function(){var t=this.currentPageIndex*this.pageSize,e=(this.currentPageIndex-1)*this.pageSize;return this.datas.slice(e>0?e:0,t)}},methods:{onRowClick:function(t,e){this.$refs.umgTb.selectAll(!1),this.$refs.umgTb.toggleSelect(e),this.onSelectionChange([t],t)},onSelectionChange:function(t,e){this.shows.add=!0,this.shows.del=!1,this.shows.edit=!1;var n=t.length;n>=1&&(this.shows.del=!0),1==n&&(this.shows.edit=!0)},doListAllUsers:function(){var t=this;this.datas=[],this.loading=!0,this.currentPageIndex=1,_.listAllUsers().then(function(e){if(e)for(var n=0;n<e.length;n++)e[n].userTypeDesc=_.$TYPES.parse(e[n].userType);t.$set(t,"datas",e),t.loading=!1}).catch(function(e){t.$Message.error(e.toString()),t.loading=!1})},onAddUser:function(){this.userEdit.isAdd=!0,this.userEdit.userID="",this.userEdit.userName="",this.userEdit.userType="",this.userEdit.userPWD="",this.userEdit.show=!0},onDelUser:function(){var t=this.$refs.umgTb.getSelection();if(t){try{for(var e=0;e<t.length;e++)_.sync.delUser(t[e].userID);this.$Message.info("操作成功")}catch(t){this.$Message.error(t.toString())}this.doListAllUsers()}},onEditUser:function(){var t=this.$refs.umgTb.getSelection();t&&1==t.length&&(this.userEdit.isAdd=!1,this.userEdit.userPWD="",this.userEdit.userID=t[0].userID,this.userEdit.userName=t[0].userName,this.userEdit.userType=t[0].userType,this.userEdit.show=!0)},onSaveUser:function(){var t=this;if(this.userEdit.userID)if(this.userEdit.userName)if(this.userEdit.isAdd)_.addUser(this.userEdit.userID,this.userEdit.userName,this.userEdit.userPWD).then(function(e){t.$Message.info("操作成功"),t.doListAllUsers(),t.userEdit.show=!1}).catch(function(e){t.$Message.error(e.toString()),t.doListAllUsers()});else{try{_.sync.updateUserName(this.userEdit.userID,this.userEdit.userName),_.sync.updateUserPwd(this.userEdit.userID,this.userEdit.userPWD),this.userEdit.show=!1,this.$Message.info("操作成功")}catch(t){this.$Message.error(t.toString())}this.doListAllUsers()}else this.$Message.error("用户名不能为空");else this.$Message.error("用户ID不能为空")},loadList:function(){this.doListAllUsers()}},created:function(){}},Q={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{staticStyle:{padding:"0px 5px 5px 5px"}},[n("div",[n("Button",{attrs:{type:"text",icon:"md-refresh-circle"},on:{click:t.loadList}},[t._v("刷新")]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.shows.add,expression:"shows.add"}],attrs:{type:"text",icon:"md-add-circle"},on:{click:t.onAddUser}},[t._v("新增")]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.shows.edit,expression:"shows.edit"}],attrs:{type:"text",icon:"ios-create"},on:{click:t.onEditUser}},[t._v("修改")]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.shows.del,expression:"shows.del"}],attrs:{type:"text",icon:"md-trash"},on:{click:t.onDelUser}},[t._v("删除")])],1)]),t._v(" "),n("Table",{directives:[{name:"watch-height",rawName:"v-watch-height",value:function(e,n){return t.tableHeaght=n-80},expression:"(ch, ph) => (tableHeaght = ph - 80)"}],ref:"umgTb",attrs:{height:t.tableHeaght,loading:t.loading,columns:t.columns,data:t.calcPageDatas,"highlight-row":!0},on:{"on-row-click":t.onRowClick,"on-selection-change":t.onSelectionChange}}),t._v(" "),n("Page",{staticStyle:{"line-height":"45px",background:"#fff",float:"right",padding:"0px 45px"},attrs:{"show-total":"",total:t.datas.length,size:"small",current:t.currentPageIndex,"page-size":t.pageSize},on:{"on-change":function(e){return t.currentPageIndex=e}}}),t._v(" "),n("Drawer",{attrs:{title:t.userEdit.isAdd?"新增用户":"修改用户",width:"450px",closable:!1},model:{value:t.userEdit.show,callback:function(e){t.$set(t.userEdit,"show",e)},expression:"userEdit.show"}},[n("Form",{ref:"useredit",attrs:{"label-position":"left",model:t.userEdit,"label-width":80}},[n("FormItem",{staticClass:"mg_b_10",attrs:{label:"登录ID: ",prop:"userID"}},[t.userEdit.isAdd?n("i-input",{attrs:{placeholder:"Enter your user ID"},model:{value:t.userEdit.userID,callback:function(e){t.$set(t.userEdit,"userID",e)},expression:"userEdit.userID"}}):n("span",[t._v(t._s(t.userEdit.userID))])],1),t._v(" "),n("FormItem",{staticClass:"mg_b_10",attrs:{label:"用户名: ",prop:"UserName"}},[n("i-input",{attrs:{placeholder:"Enter your name"},model:{value:t.userEdit.userName,callback:function(e){t.$set(t.userEdit,"userName",e)},expression:"userEdit.userName"}})],1),t._v(" "),n("FormItem",{staticClass:"mg_b_10",attrs:{label:"密码: ",prop:"UserPWD"}},[n("i-input",{attrs:{placeholder:"Enter your password",type:"password"},model:{value:t.userEdit.userPWD,callback:function(e){t.$set(t.userEdit,"userPWD",e)},expression:"userEdit.userPWD"}})],1),t._v(" "),n("FormItem",{staticClass:"mg_b_10",attrs:{label:"用户类型: ",prop:"usertype"}},[t._v("\n        普通用户\n      ")])],1),t._v(" "),n("div",[n("Button",{staticClass:"fr mg_l_10",attrs:{type:"primary"},on:{click:t.onSaveUser}},[t._v("确定")]),t._v(" "),n("Button",{staticClass:"fr",attrs:{type:"default"},on:{click:function(e){t.userEdit.show=!1}}},[t._v("关闭")])],1)],1)],1)},staticRenderFns:[]};var J={name:"FilePmsList",components:{fileSelector:U},data:function(){return{datas:[],loading:!1,tableHeaght:500,currentPageIndex:1,pageSize:60,shows:{add:!0,del:!1,edit:!1},permissionMax:3,fPermissionEdit:{show:!1,isAdd:!1,userID:"",path:"",permission:0,permissions:[],permissionID:""},fsSelector:{operationObj:!1,showDailog:!1,selectFile:!0,selectDir:!0,selectMuti:!0,startPath:"/"},userselector:{datas:[]},columns:[{type:"selection",width:60,align:"center"},{title:"用户ID",key:"userID"},{title:"文件路径",key:"path"},{title:"权限类型",key:"permission",render:function(t,e){return t("span",{},W.$TYPE.sum2Name(e.row.permission).join(", "))}},{title:"创建时间",key:"ctTime"}]}},computed:{calcPageDatas:function(){var t=this.currentPageIndex*this.pageSize,e=(this.currentPageIndex-1)*this.pageSize;return this.datas.slice(e>0?e:0,t)}},methods:{onRowClick:function(t,e){this.$refs.fpmsTb.selectAll(!1),this.$refs.fpmsTb.toggleSelect(e),this.onSelectionChange([t],t)},onSelectionChange:function(t,e){this.shows.add=!0,this.shows.del=!1,this.shows.edit=!1;var n=t.length;n>=1&&(this.shows.del=!0),1==n&&(this.shows.edit=!0)},onSelectDir:function(t){this.fsSelector.operationObj=t,this.fsSelector.selectFile=!1,this.fsSelector.selectDir=!0,this.fsSelector.selectMuti=!1,this.fsSelector.startPath="/",this.fsSelector.showDailog=!0},onSelectCancel:function(){this.fsSelector.showDailog=!1},onSelectedFile:function(t){this.fsSelector.showDailog=!1,this.fsSelector.operationObj&&this[this.fsSelector.operationObj](t)},doListFPermissions:function(){var t=this;this.datas=[],this.loading=!0,this.currentPageIndex=1,W.listFPermissions().then(function(e){t.$set(t,"datas",e),t.loading=!1}).catch(function(e){t.$Message.error(e.toString()),t.loading=!1})},onAddFPermission:function(){var t=this;_.listAllUsers().then(function(e){e&&(t.userselector.datas=e)}).catch(console.error),this.fPermissionEdit.isAdd=!0,this.fPermissionEdit.userID="",this.fPermissionEdit.path="",this.fPermissionEdit.permission=0,this.fPermissionEdit.permissions=[],this.fPermissionEdit.permissionID="",this.fPermissionEdit.show=!0},onBeforFpmsSelectedDir:function(t){t&&t.length>0&&(this.fPermissionEdit.path=t[0].path)},onEditFPermission:function(){var t=this,e=this.$refs.fpmsTb.getSelection();e&&1==e.length&&(this.fPermissionEdit.isAdd=!1,this.fPermissionEdit.userID=e[0].userID,this.fPermissionEdit.path=e[0].path,this.fPermissionEdit.permission=parseInt(e[0].permission),this.fPermissionEdit.permissions=function(e){var n=t.fPermissionEdit.permission,i=[];if(n)for(var r=0;r<=t.permissionMax;r++)1<<r==(n&1<<r)&&i.push(""+r);return i}(),this.fPermissionEdit.permissionID=e[0].permissionID,this.fPermissionEdit.show=!0)},onDelFPermission:function(){var t=this.$refs.fpmsTb.getSelection();if(t){try{for(var e=0;e<t.length;e++)W.sync.delFPermission(t[e].permissionID);this.$Message.info("操作成功")}catch(t){this.$Message.error(t.toString())}this.doListFPermissions()}},onSaveFPermission:function(){var t=this;this.fPermissionEdit.userID?this.fPermissionEdit.path?(this.fPermissionEdit.permission=function(){var e=0;if(t.fPermissionEdit.permissions.length>0)for(var n=0;n<t.fPermissionEdit.permissions.length;n++)e+=1<<t.fPermissionEdit.permissions[n];return e}(),this.fPermissionEdit.isAdd?W.addFPermission(this.fPermissionEdit.userID,this.fPermissionEdit.path,this.fPermissionEdit.permission).then(function(e){t.$Message.info("操作成功"),t.doListFPermissions(),t.fPermissionEdit.show=!1}).catch(function(e){t.$Message.error(e.toString()),t.doListFPermissions()}):W.updateFPermission(this.fPermissionEdit.permissionID,this.fPermissionEdit.permission).then(function(e){t.$Message.info("操作成功"),t.doListFPermissions(),t.fPermissionEdit.show=!1}).catch(function(e){t.$Message.error(e.toString()),t.doListFPermissions()})):this.$Message.error("授权路径名不能为空"):this.$Message.error("用户ID不能为空")},loadList:function(){this.doListFPermissions()}},created:function(){}},tt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"page"},[n("div",{staticStyle:{padding:"0px 5px 5px 5px"}},[n("div",[n("Button",{attrs:{type:"text",icon:"md-refresh-circle"},on:{click:t.loadList}},[t._v("刷新")]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.shows.add,expression:"shows.add"}],attrs:{type:"text",icon:"md-add-circle"},on:{click:t.onAddFPermission}},[t._v("新增")]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.shows.edit,expression:"shows.edit"}],attrs:{type:"text",icon:"ios-create"},on:{click:t.onEditFPermission}},[t._v("修改")]),t._v(" "),n("Button",{directives:[{name:"show",rawName:"v-show",value:t.shows.del,expression:"shows.del"}],attrs:{type:"text",icon:"md-trash"},on:{click:t.onDelFPermission}},[t._v("删除")])],1)]),t._v(" "),n("Table",{directives:[{name:"watch-height",rawName:"v-watch-height",value:function(e,n){return t.tableHeaght=n-80},expression:"(ch, ph) => (tableHeaght = ph - 80)"}],ref:"fpmsTb",attrs:{loading:t.loading,columns:t.columns,data:t.calcPageDatas,"highlight-row":!0,height:t.tableHeaght},on:{"on-row-click":t.onRowClick,"on-selection-change":t.onSelectionChange}}),t._v(" "),n("Page",{staticStyle:{"line-height":"45px",background:"#fff",float:"right",padding:"0px 45px"},attrs:{"show-total":"",total:t.datas.length,size:"small",current:t.currentPageIndex,"page-size":t.pageSize},on:{"on-change":function(e){return t.currentPageIndex=e}}}),t._v(" "),n("Drawer",{attrs:{title:t.fPermissionEdit.isAdd?"新增权限":"修改权限",width:"450px"},model:{value:t.fPermissionEdit.show,callback:function(e){t.$set(t.fPermissionEdit,"show",e)},expression:"fPermissionEdit.show"}},[n("Form",{ref:"useredit",attrs:{"label-position":"left",model:t.fPermissionEdit,"label-width":80}},[n("FormItem",{staticClass:"mg_b_10",attrs:{label:"用户ID: ",prop:"userID"}},[t.fPermissionEdit.isAdd?n("Select",{attrs:{transfer:""},model:{value:t.fPermissionEdit.userID,callback:function(e){t.$set(t.fPermissionEdit,"userID",e)},expression:"fPermissionEdit.userID"}},t._l(t.userselector.datas,function(e){return n("Option",{key:e.userID,attrs:{value:e.userID}},[t._v(t._s(e.userName))])}),1):n("span",[t._v(t._s(t.fPermissionEdit.userID))])],1),t._v(" "),n("FormItem",{staticClass:"mg_b_10",attrs:{label:"授权目录: ",prop:"path"}},[t.fPermissionEdit.isAdd?n("i-input",{attrs:{placeholder:"授权路径",readonly:""},model:{value:t.fPermissionEdit.path,callback:function(e){t.$set(t.fPermissionEdit,"path",e)},expression:"fPermissionEdit.path"}},[n("Button",{attrs:{slot:"append"},on:{click:function(e){return t.onSelectDir("onBeforFpmsSelectedDir")}},slot:"append"},[t._v("选择")])],1):n("span",[t._v(t._s(t.fPermissionEdit.path))])],1),t._v(" "),n("FormItem",{staticClass:"mg_b_10",attrs:{label:"授权权限: ",prop:"Permission"}},[n("Checkbox-Group",{model:{value:t.fPermissionEdit.permissions,callback:function(e){t.$set(t.fPermissionEdit,"permissions",e)},expression:"fPermissionEdit.permissions"}},[n("Checkbox",{attrs:{label:"1"}},[t._v("Visible")]),t._v(" "),n("Checkbox",{attrs:{label:"2"}},[t._v("Read")]),t._v(" "),n("Checkbox",{attrs:{label:"3"}},[t._v("Write")])],1)],1)],1),t._v(" "),n("div",[n("Button",{staticClass:"fr mg_l_10",attrs:{type:"primary"},on:{click:t.onSaveFPermission}},[t._v("确定")]),t._v(" "),n("Button",{staticClass:"fr",attrs:{type:"default"},on:{click:function(e){t.fPermissionEdit.show=!1}}},[t._v("关闭")])],1)],1),t._v(" "),n("fileSelector",{attrs:{"select-muti":t.fsSelector.selectMuti,"select-file":t.fsSelector.selectFile,"select-dir":t.fsSelector.selectDir,"start-path":t.fsSelector.startPath,"show-dailog":t.fsSelector.showDailog},on:{"on-select":t.onSelectedFile,"on-cancel":t.onSelectCancel}})],1)},staticRenderFns:[]};var et={name:"SysSetting",components:{MyInfo:n("VU/8")(Y,K,!1,function(t){n("XaiU")},"data-v-56062024",null).exports,UserList:n("VU/8")(Z,Q,!1,function(t){n("9a7g")},"data-v-67da153a",null).exports,FilePmsList:n("VU/8")(J,tt,!1,function(t){n("vCjF")},"data-v-713240bb",null).exports},data:function(){return{tabHeight:500,currentTab:"currentAccount",currentAccount:{userID:"",userType:"",userName:""}}},methods:{},created:function(){},watch:{currentTab:function(t,e){"userManage"==t?this.$refs.userManage.loadList():"fPermissionManage"==t&&this.$refs.fPermissionManage.loadList()}}},nt={render:function(){var t=this,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{ref:"syssetting-page",staticClass:"sys-setting"},[i("Tabs",{directives:[{name:"watch-height",rawName:"v-watch-height",value:function(t){return e.tabHeight=t-52},expression:"(h) => (tabHeight = h - 52)"}],staticStyle:{height:"100%"},model:{value:e.currentTab,callback:function(t){e.currentTab=t},expression:"currentTab"}},[i("TabPane",{style:{height:e.tabHeight+"px"},attrs:{name:"currentAccount",label:"账户信息"}},[i("my-info",{on:{"user-changed":function(n){return e.$set(t,"currentAccount",n)}}})],1),e._v(" "),0===e.currentAccount.userType?i("TabPane",{style:{height:e.tabHeight+"px"},attrs:{name:"userManage",label:"账户管理"}},[i("user-list",{ref:"userManage",staticStyle:{width:"100%",height:"100%"}})],1):e._e(),e._v(" "),0===e.currentAccount.userType?i("TabPane",{style:{height:e.tabHeight+"px"},attrs:{name:"fPermissionManage",label:"文件权限管理"}},[i("file-pms-list",{ref:"fPermissionManage"})],1):e._e()],1)],1)},staticRenderFns:[]};var it=n("VU/8")(et,nt,!1,function(t){n("dsTD")},"data-v-8b0924c4",null).exports,rt=n("fZjL"),ot=n.n(rt),at={name:"Preivew",data:function(){return{loadding:!0,loaddingText:"加载中...",title:"预览文件",playerType:"",playerSrc:""}},computed:{},methods:{setTitle:function(){document.title=this.title?this.title:"查看文件"},onLoading:function(t){var e=this;t&&ot()(t).forEach(function(n){e.$set(e,n,t[n])})}},created:function(){var t=this.$route.query.token;if(this.playerType=this.$route.path.getName(),t&&t.length>0&&this.playerType){switch(this.playerType){case"audio":this.title="音频播放";break;case"video":this.title="视频播放";break;case"picture":this.title="图片播放";break;default:this.title="暂不支持的格式",this.loaddingText=this.title}setInterval(function(){return j.status(t)},6e4)}else this.title="链接似乎是无效的呢~",this.$Message.error("链接错误, 请重新打开"),setTimeout(window.close,2e3)},watch:{title:function(t,e){this.setTitle()}}};var st={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"preview-page",staticClass:"page"},[e("router-view",{on:{"on-loading":this.onLoading}}),this._v(" "),e("Spin",{directives:[{name:"show",rawName:"v-show",value:this.loadding,expression:"loadding"}],attrs:{fix:""}},[e("Icon",{staticStyle:{animation:"ani-demo-spin 1s linear infinite"},attrs:{type:"ios-loading",size:"20"}}),this._v(" "),e("div",[this._v(this._s(this.loaddingText))])],1)],1)},staticRenderFns:[]};var ct=n("VU/8")(at,st,!1,function(t){n("3/6Q")},"data-v-a1709222",null).exports,ut=(n("Km9/"),n("RvFq")),lt=n.n(ut),dt=(n("KXTU"),{name:"pw-audio",data:function(){return{}},methods:{buildMusicList:function(t,e){var n={cindex:0,list:[]};if(e){var i=e.path;if(e.peerDatas&&e.peerDatas.length>0)for(var r=0;r<e.peerDatas.length;r++){var o=e.peerDatas[r];if(o.isFile){var a=o.path.getSuffixed(!1);j.isSupport("audio",a)&&(o.path==i&&(n.cindex=n.list.length),n.list.push({name:o.path.getName(!1),artist:m.a.formatSize(o.size),url:j.buildStreamURL(t,o.path.getName()),cover:"/static/img/preview/default_cover.png"}))}}}return n},getCover:function(t,e){var n=this;jsmediatags.read(t.url,{onSuccess:function(i){var r=i.tags;t.artist=r.artist?r.artist:"",r.picture?t.cover="data:"+r.picture.format+";base64,"+n.arrayBufferToBase64(r.picture.data):t.cover="/img/preview/default_cover.png",e&&e()},onError:function(t){e&&e(t)}})},arrayBufferToBase64:function(t){for(var e="",n=new Uint8Array(t),i=n.byteLength,r=0;r<i;r++)e+=String.fromCharCode(n[r]);return window.btoa(e)},initAPlayer:function(t){var e=this,n=new lt.a({audio:t,listMaxHeight:0,container:document.getElementById("aplayer")||this.$refs.aplayer.$el});return n.on("listshow",function(t){document.getElementById("aplayer").style.height="100%"}),n.on("listhide",function(t){document.getElementById("aplayer").style.height="66px"}),n.on("listswitch",function(i){var r=t[i.index];r.artist=void 0,e.$emit("on-loading",{title:r.name,loadding:!1}),r._cover_?r.cover&&(document.getElementById("bg").style.backgroundImage="url('"+r.cover+"')"):e.getCover(r,function(){r._cover_=!0,n.template.pic.style.backgroundImage=r.cover?"url('"+r.cover+"')":"",n.template.author.innerHTML=r.artist?r.artist:"",document.getElementById("bg").style.backgroundImage="url('"+r.cover+"')"})}),n},initDatas:function(t){var e=this;try{j.samedirFiles(t).then(function(n){var i="正在加载: "+n.path.getName(!1);e.$emit("on-loading",{title:i,loaddingText:i});var r=e.buildMusicList(t,n),o=e.initAPlayer(r.list);r.list.length>0&&(o.list.switch(r.cindex),o.play()),e.$emit("on-loading",{title:n.path.getName(!1),loadding:!1})}).catch(function(t){e.$emit("on-loading",{title:"加载失败",loaddingText:t.toString()}),console.error(t)})}catch(t){this.$emit("on-loading",{title:"加载失败",loaddingText:t.toString()}),console.error(t)}}},created:function(){this.initDatas(this.$route.query.token)}}),ht={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"pw-audio-page",staticClass:"page"},[e("div",{staticStyle:{position:"fixed","background-size":"contain","background-position":"center center",filter:"blur(1px)",width:"100%",height:"100%"},attrs:{id:"bg"}}),this._v(" "),e("div",{ref:"aplayer",attrs:{id:"aplayer"}})])},staticRenderFns:[]};var ft=n("VU/8")(dt,ht,!1,function(t){n("ucyG"),n("jYTs")},"data-v-bc0eabaa",null).exports,pt=n("8S1g"),gt={components:{Stick:n.n(pt).a.component},name:"",data:function(){return{isLoading:!1,allDatas:{cindex:0,list:[]},list:[],pageIndex:-1,pageSize:10}},computed:{isEnd:function(){return this.allDatas.list.length<=this.list.length}},methods:{onShowBig:function(t){window.open(t.cover)},doLoadMore:function(){var t=this;this.isLoading=!0,setTimeout(function(){if(t.allDatas.list.length>0){var e=++t.pageIndex*t.pageSize,n=(t.pageIndex+1)*t.pageSize;t.allDatas.list.slice(e,n).forEach(function(e){t.list.push(e)})}t.isLoading=!1})},doBuilList:function(t,e){var n={cindex:-1,list:[],count:-1};if(e){var i=e.path;if(e.peerDatas&&e.peerDatas.length>0)for(var r=0;r<e.peerDatas.length;r++){var o=e.peerDatas[r];if(o.isFile){var a=o.path.getSuffixed(!1);j.isSupport("picture",a)&&(o.path==i&&(n.cindex=0),-1!=n.cindex&&n.list.push({cover:j.buildStreamURL(t,o.path.getName()),title:"SEQ-"+(r+1),intro:o.path.getName()}))}}}return n},initDatas:function(t){var e=this;try{j.samedirFiles(t).then(function(n){var i="正在加载: "+n.path.getName(!1);e.$emit("on-loading",{title:i,loaddingText:i}),e.allDatas=e.doBuilList(t,n),e.doLoadMore(),i="图片预览",e.$emit("on-loading",{title:n.path.getName(!1),loadding:!1})}).catch(function(t){e.$emit("on-loading",{title:"加载失败",loaddingText:t.toString()}),console.error(t)})}catch(t){this.$emit("on-loading",{title:"加载失败",loaddingText:t.toString()}),console.error(t)}}},created:function(){this.initDatas(this.$route.query.token)}},mt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"pw-picture-page",staticClass:"page"},[n("div",{staticClass:"container"},[n("Stick",{attrs:{list:t.list},on:{onScrollEnd:t.doLoadMore},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"card cs_p",on:{click:function(n){return t.onShowBig(e.data)}}},[e.data.cover?n("img",{attrs:{src:e.data.cover}}):t._e(),t._v(" "),n("h2",[t._v(t._s(e.data.title))]),t._v(" "),n("p",[t._v(t._s(e.data.intro))])])]}}])}),t._v(" "),n("div",{staticClass:"tools"},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}]},[t._v("正在加载...")]),t._v(" "),t.isEnd?n("div",[t._v("没有更多数据了")]):t._e(),t._v(" "),t.isEnd||t.isLoading?t._e():n("a",{staticStyle:{color:"#555"},on:{click:t.doLoadMore}},[t._v("\n        加载更多\n      ")])])],1)])},staticRenderFns:[]};var vt=n("VU/8")(gt,mt,!1,function(t){n("+E5I"),n("mmwE")},"data-v-58998f9f",null).exports,yt=n("Igiw"),_t=n.n(yt),wt={name:"",data:function(){return{}},methods:{initDatas:function(t){var e=this;try{j.samedirFiles(t).then(function(n){var i=n.path.getName(!1),r="";if(n&&n.peerdatas)for(var o=["vtt"],a=0;a<n.peerdatas.length;a++){var s=n.peerdatas[a].path;if(s&&o.indexOf(s.getSuffixed(!1).toLowerCase())>-1&&s.indexOf(i)>-1){r=n.peerdatas[a].path;break}}var c="正在加载: "+i;e.$emit("on-loading",{title:c,loaddingText:c});var u={container:document.getElementById("dplayer")||e.$refs.dplayer.$el,video:{url:j.buildStreamURL(t,n.path.getName())},contextmenu:[]};r&&(u.subtitle={url:j.buildStreamURL(t,r.getName())}),new _t.a(u).play(),c=i,e.$emit("on-loading",{title:c,loadding:!1})}).catch(function(t){e.$emit("on-loading",{title:"加载失败",loaddingText:t.toString()})})}catch(t){this.$emit("on-loading",{title:"加载失败",loaddingText:t.toString()})}}},created:function(){this.initDatas(this.$route.query.token)}},St={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{ref:"pw-video-page",staticClass:"page"},[e("div",{ref:"dplayer",staticStyle:{height:"100%",width:"100%"},attrs:{id:"dplayer"}})])},staticRenderFns:[]};var bt=n("VU/8")(wt,St,!1,function(t){n("YplS")},"data-v-dbbb6410",null).exports;i.default.use(c.a);var xt=new c.a({routes:[{path:"/",name:"LogIn",component:b},{path:"/main",name:"Main",component:E,children:[{name:"files",path:"",component:X},{name:"files",path:"files",component:X},{name:"settings",path:"settings",component:it}]},{path:"/preview",name:"Preview",component:ct,children:[{name:"audio",path:"audio",component:ft},{name:"picture",path:"picture",component:vt},{name:"video",path:"video",component:bt}]}]}),Dt=n("b3L9"),Et=n.n(Dt);n("7QVd"),n("0lA4");i.default.use(xt),i.default.use(Et.a),i.default.config.productionTip=!1,new i.default({el:"#app",router:xt,components:{App:s},template:"<App/>"})},Tt9T:function(t,e){},XaiU:function(t,e){},YEr2:function(t,e){},YjBe:function(t,e){},YplS:function(t,e){},bMA1:function(t,e){},dsTD:function(t,e){},dzvC:function(t,e,n){"use strict";var i={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("breadcrumb",{attrs:{separator:">"}},[n("BreadcrumbItem",[n("a",{on:{click:function(e){return t.address_GoToRoot()}}},[t._v(t._s(t.showrootname))])]),t._v(" "),t._l(t.paths,function(e,i){return n("BreadcrumbItem",{directives:[{name:"show",rawName:"v-show",value:e&&(i>=t.paths.length-2||i<=t.max),expression:"item && (index >= paths.length - 2 || index <= max)"}],key:i},[n("a",{on:{click:function(n){return t.address_GoToPath(e,i)}}},[t._v(t._s(e))])])})],2)},staticRenderFns:[]};var r=n("VU/8")({name:"fileaddress",props:["path","root","rootname","depth"],data:function(){return{paths:[],max:6,showrootname:""}},created:function(){this.max=this.depth?this.depth-2>0?this.depth-2:2:this.max,this.buildPaths()},methods:{buildPaths:function(){this.showrootname=this.rootname?this.rootname:"/",this.paths=this.path.split("/")},address_GoToRoot:function(){this.$emit("click",this.root?this.root:"/")},address_GoToPath:function(t,e){for(var n="",i=0;i<=e;i++)this.paths[i]&&(n+="/"+this.paths[i]);this.$emit("click",n)}},watch:{path:function(t,e){this.buildPaths()}}},i,!1,function(t){n("7M5M")},"data-v-15f4f49e",null);e.a=r.exports},eijq:function(t,e,n){"use strict";var i={name:"fileicon",props:["node","edit-mode"],data:function(){return{iconTypes:["ai","avi","bmp","catdrawing","catpart","catproduct","cdr","csv","doc","docx","dps","dpt","dwg","eio","eml","et","ett","exb","exe","file","flv","fold","gif","htm","html","jpeg","jpg","mht","mhtml","mid","mp3","mp4","mpeg","msg","odp","ods","odt","pdf","png","pps","ppt","pptx","prt","psd","rar","rm","rmvb","rtf","sldprt","swf","tif","txt","url","wav","wma","wmv","wps","wpt","xls","xlsx","zip"],icon:"",filename:"",isEditMode:!1}},methods:{onBoxClick:function(t){"INPUT"==t.srcElement.tagName.toUpperCase()&&t.stopPropagation()},onNameClick:function(t){t.stopPropagation(),this.$emit("click",this.node,t)},doSave:function(){!0===this.isEditMode&&(this.isEditMode=!1,this.$emit("rename",this.node.path,this.filename))},getFileIcon:function(t){return this.node.isFile?function(t){var e=["ai","avi","bmp","catdrawing","catpart","catproduct","cdr","csv","doc","docx","dps","dpt","dwg","eio","eml","et","ett","exb","exe","file","flv","fold","gif","htm","html","jpeg","jpg","mht","mhtml","mid","mp3","mp4","mpeg","msg","odp","ods","odt","pdf","png","pps","ppt","pptx","prt","psd","rar","rm","rmvb","rtf","sldprt","swf","tif","txt","url","wav","wma","wmv","wps","wpt","xls","xlsx","zip"];if(t)for(var n=t.substring(t.lastIndexOf(".")+1).toLowerCase(),i=0;i<e.length;i++)if(e[i]==n)return"/static/img/file_icons/"+n+".png";return"/static/img/file_icons/file.png"}(t):"/static/img/file_icons/folder.png"},initvalue:function(){this.filename=this.node.path.getName(),this.icon=this.getFileIcon(this.filename)}},created:function(){var t=this;this.initvalue(),this.$nextTick(function(){window.addEventListener("keydown",function(e){13==((e=e||window.event).keyCode||e.which)&&t.doSave()}),window.addEventListener("mousedown",function(e){e.target==t.$el.querySelector("input")||t.doSave()})})},watch:{node:{deep:!0,handler:function(t,e){this.initvalue()}},editMode:function(t){this.isEditMode=t}}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{width:"100%"},on:{click:t.onBoxClick}},[n("div",{staticStyle:{overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}},[n("img",{staticStyle:{"vertical-align":"middle","margin-right":"5px",width:"32px",height:"32px"},attrs:{src:t.icon}}),t._v(" "),t.isEditMode?n("i-input",{staticStyle:{width:"calc(100% - 50px)"},on:{"on-blur":t.doSave,"on-enter":t.doSave},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}}):n("a",{staticStyle:{color:"#515a6e"},attrs:{title:t.filename},on:{click:t.onNameClick}},[t._v(t._s(t.filename))])],1)])},staticRenderFns:[]};var o=n("VU/8")(i,r,!1,function(t){n("uvlh")},"data-v-f8f5dcb8",null);e.a=o.exports},h4ME:function(t,e){},jYTs:function(t,e){},mF0L:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var i,r=n("fZjL"),o=n.n(r),a={extendAttrs:function(t,e,n){if(!t)return e;for(var i in this.isType(t,"object")||(t={}),e)this.isType(e[i],"object")&&!1!==n?t[i]=this.extendAttrs(t[i],e[i]):t[i]=e[i];return t},getType:function(t){try{return Object.prototype.toString.call(t).slice(8,-1).toLowerCase().toLowerCase()}catch(t){return t}},isType:function(t,e){try{return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()===e.toLowerCase()}catch(t){return!1}},isArray:function(t){return void 0!=t&&this.isType(t,"Array")},isString:function(t){return void 0!=t&&this.isType(t,"string")},hasKey:function(t,e){return!!t&&Object.prototype.hasOwnProperty.call(t,e)},regExp:{CHINESE_CHARACTER:/[\u4e00-\u9fa5]/,NAME:/^[a-zA-Z\u4e00-\u9fa5]+$/,HTTP_ALL:/http(s?):\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\’:+!]*([^<>\"\"])*/g,HTTP_STRICT:/((http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?|www+(\.[\w\-_]+)+([\w\-\.,@?^=%&amp;:\/~\+#]*[\w\-\@?^=%&amp;\/~\+#])?)/gi,HTTP:/^http(s?):\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\’:+!]*([^<>\"\"])*$/,DOMAIN:/^(http|https|ws):\/\/([^/:]+)(:\d*)?\//,EMAIL:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i,NUMBER_AND_LETTER:/^([A-Z]|[a-z]|[\d])*$/,POSITIVE_NUMBER:/^[1-9]\d*$/,NON_NEGATIVE_NUMBER:/^(0|[1-9]\d*)$/,IP:/^((1?\d?\d|(2([0-4]\d|5[0-5])))\.){3}(1?\d?\d|(2([0-4]\d|5[0-5])))$/,URL:/^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z]{2,6}$/,PHONE:/^((0\d{2,3})-)?(\d{7,8})(-(\d{3,}))?$|^(13|14|15|17|18)[0-9]{9}$/,TELEPHONE:/^(13|14|15|17|18)[0-9]{9}$/,QQ:/^\d{1,10}$/,DATE:/^((?!0000)[0-9]{4}-((0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-8])|(0[13-9]|1[0-2])-(29|30)|(0[13578]|1[02])-31)|([0-9]{2}(0[48]|[2468][048]|[13579][26])|(0[48]|[2468][048]|[13579][26])00)-02-29)$/,POUND_TOPIC:/^#([^\/|\\|\:|\*|\?|\"|<|>|\|]+?)#/,AT:/(@[a-zA-Z0-9_\u4e00-\u9fa5（）()]+)(\W|$)/gi,DIR_NAME:/[\\/:*?\"<>|]/,EmplName:/[\\\/:*?\"'<>\{};#!|]/,PWD:/((?=.*\d)(?=.*\D)|(?=.*[a-zA-Z])(?=.*[^a-zA-Z]))^.{8,32}$/},random:function(t){var e="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678";t=t||32;for(var n=e.length,i="",r=0;r<t;r++)i+=e.charAt(Math.floor(Math.random()*n));return i},guid:(i=0,function(t){for(var e=(+new Date).toString(32),n=0;n<5;n++)e+=Math.floor(65535*Math.random()).toString(32);return(t||"")+e+(i++).toString(32)}),formatSize:function(t){try{for(var e=t+" bytes",n=["KB","MB","GB","TB","PB","EB","ZB","YB"],i=0,r=t/1024;r>1;r/=1024,i++)e=r.toFixed(3)+" "+n[i];return e}catch(e){return t}},toPercent:function(t,e){return t<=0||e<=0?0:Math.round(e/t*100)},long2Time:function(t){return t&&0!=t?this.dateFormat(new Date(t),"yyyy-MM-dd HH:mm"):""},dateFormat:function(t,e){var n="[object Date]"==Object.prototype.toString.call(t)?t:new Date(t);e||(e="yyyyMMddHHmmss");var i=function(t){return(t<10?"0":"")+t};return e.replace(/yyyy|MM|dd|HH|mm|ss/g,function(t){switch(t){case"yyyy":return i(n.getFullYear());case"MM":return i(n.getMonth()+1);case"dd":return i(n.getDate());case"HH":return i(n.getHours());case"mm":return i(n.getMinutes());case"ss":return i(n.getSeconds())}})},getQueryParam:function(t,e){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=t.substr(1).match(n);return null!=i?decodeURIComponent(i[2]):null},setCookie:function(t,e,n){var i="";if(void 0!=n&&n>0){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),i="expires="+r.toUTCString()+";"}document.cookie=t+"="+e+";path=/;"+i},getCookie:function(t){var e,n=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(n))?e[2]:null},addEvent:function(t,e,n,i){t.addEventListener?t.addEventListener(e,n,i):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n},triggerMouseEvent:function(t,e,n,i){var r=document.createEvent("MouseEvents");r.initEvent(e,n,i),t.dispatchEvent(r)},cuteFile:function(t,e){if(t&&e)return t._cute=t._cute?{_start:t._cute._end,_end:t._cute._end+e}:{_start:0,_end:e},t.slice(t._cute._start,t._cute._end)},supportES6:function(){try{new Function("var _ = () => {};")}catch(t){return!1}return!0},AjaxRequest:function(t){for(var e in t.xhrPayload="",t.async=void 0==t.async||t.async,t.datas=t.datas?t.datas:{},t.method=t.method?t.method.toUpperCase():"GET",t.headers=t.headers?t.headers:{},t.payload=this.buildPayload(t.datas),t.xhrPayload=t.payload.payload_encode,t.xhrPayload&&t.xhrPayload.length>0&&("GET"!=t.method&&"DELETE"!=t.method||(t.uri=t.uri+"?"+t.xhrPayload,t.xhrPayload="")),"POST"!=t.method&&"DELETE"!=t.method||void 0==t.headers["Content-Type"]&&(t.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),t.xhr=new XMLHttpRequest,t.xhr.open(t.method,t.uri,t.async),t.xhr.onreadystatechange=function(){if(t.onreadystatechange)return t.onreadystatechange(t.xhr,t)},t.timeout&&(t.xhr.timeout=parseInt(t.timeout)),t.headers)t.xhr.setRequestHeader(e,t.headers[e]);return t.setHeader=function(e,n){t.headers[e.toString()]=n,t.xhr.setRequestHeader(e,n)},t.do=function(e){return t.async&&e&&(t.onreadystatechange=e),t.xhr.send(t.xhrPayload),t.async||!e?t.xhr:e(t.xhr,t)},t},buildPayload:function(t){if(!t)return"";var e={};for(var n in t)void 0!=t[n]&&null!=t[n]&&0!=t[n].length&&(e[n]=t[n]);var i=void 0,r="",a=o()(e);if(a.length>0){a=a.sort();for(var s=[],c=[],u=0;u<a.length;u++){var l=e[a[u]];s.push(a[u]+"="+l),c.push(a[u]+"="+encodeURIComponent(l))}i=s.join("&"),r=c.join("&")}return{payload:i,payload_encode:r}},json2query:function(t,e){e=e||"";var n=[],i=Object.prototype.hasOwnProperty;for(var r in"string"!=typeof e&&(e="?"),t)i.call(t,r)&&n.push(r+"="+encodeURIComponent(t[r]));return n.length?e+n.join("&"):""},uploadByFormData:function(t,e,n){var i={ctrl:{filekey:e.name?e.name:"file",method:"POST",header:{},form:{},loadstart:function(t){},load:function(t){},loadend:function(t){},error:function(t){},abort:function(t){},progress:function(t){}},xhr:new XMLHttpRequest,formData:new FormData,abort:function(){i.xhr.abort()},start:function(){for(var e in i.xhr.open(i.ctrl.method,t),i.ctrl.header)i.xhr.setRequestHeader(e,i.ctrl.header[e]);i.xhr.overrideMimeType("application/octet-stream"),i.xhr.send(i.formData)}};for(var r in i.ctrl=this.extendAttrs(i.ctrl,n),i.ctrl.form)i.formData.append(r,i.ctrl.form[r]);return i.formData.append(i.ctrl.filekey,e),i.xhr.upload.addEventListener("loadstart",i.ctrl.loadstart),i.xhr.upload.addEventListener("load",i.ctrl.load),i.xhr.upload.addEventListener("loadend",i.ctrl.loadend),i.xhr.upload.addEventListener("progress",i.ctrl.progress),i.xhr.upload.addEventListener("error",i.ctrl.error),i.xhr.upload.addEventListener("abort",i.ctrl.abort),i.xhr.onreadystatechange=function(t){var e=t.target;4==e.readyState&&200!=e.status&&i.ctrl.error(new Error(e.responseText?e.responseText:e.statusText))},i},uploadByFileReader:function(t,e,n){var i={ctrl:{method:"POST",header:{"Content-Type":"text/plain"},progress:function(t,e){}},xhr:new XMLHttpRequest,reader:new FileReader,abort:function(){i.reader.abort(),i.xhr.abort()},start:function(){for(var n in i.xhr.open(i.ctrl.method,t),i.ctrl.header)i.xhr.setRequestHeader(n,i.ctrl.header[n]);i.xhr.overrideMimeType("application/octet-stream"),self.reader.readAsArrayBuffer(e)}};return i.ctrl=this.extendAttrs(i.ctrl,n),i.xhr.upload.addEventListener("progress",function(t){t.lengthComputable&&i.ctrl.progress(Math.round(100*t.loaded/t.total),t)},!1),i.reader.onload=function(t){self.xhr.send(t.target.result)},i},areaCover:function(t){var e=void 0,n=void 0;t.ignoreTags=["BUTTON","INPUT","A"],t.background.style.userSelect="none",t.background.style.webkitUserSelect="none",t.background.onmousedown=function(i){var r=i||event;r.stopPropagation();try{e&&t.background.removeEventListener("mousemove",e,!0),n&&t.background.removeEventListener("mouseup",n,!0);var o=document.getElementById("mouse-box");o&&t.background.removeChild(o)}catch(t){}if(!(t.ignoreTags&&t.ignoreTags.indexOf(r.target.tagName)>-1)&&2!=r.which){var a=t.background.getBoundingClientRect?t.background.getBoundingClientRect():{x:0,y:0},s=r.clientX-a.x,c=r.clientY-a.y,u=document.createElement("div");u.id="mouse-box",u.style.background="#e9f3fd",u.style.border="1px dashed #000",u.style.position="absolute",u.style.opacity="0.6",u.style.filter="alpha(opacity=60)",t.background.appendChild(u),e=function(e){var n=e||event;n.stopPropagation();var i=t.background.getBoundingClientRect?t.background.getBoundingClientRect():{x:0,y:0},r=n.clientX-i.x-s,o=n.clientY-i.y-c,a=Math.abs(r),l=Math.abs(o);u.style.left=r>0?s+"px":n.clientX-i.x+"px",u.style.top=o>0?c+"px":n.clientY-i.y+"px",u.style.width=a+"px",u.style.height=l+"px";var d=u.getBoundingClientRect().left,h=u.getBoundingClientRect().top,f=u.getBoundingClientRect().right,p=u.getBoundingClientRect().bottom,g=t.background.querySelectorAll(t.coverfilter);if(g&&g.length>0)for(var m=0;m<g.length;m++){var v=g[m].getBoundingClientRect().left,y=g[m].getBoundingClientRect().top,_=g[m].getBoundingClientRect().right,w=g[m].getBoundingClientRect().bottom;f<v||p<y||d>_||h>w?t.onUnCover(g[m]):t.onCover(g[m])}},n=function(n){try{e&&t.background.removeEventListener("mousemove",e,!0);var i=document.getElementById("mouse-box");i&&t.background.removeChild(i)}catch(t){console.error(t)}},t.background.addEventListener("mousemove",e,!0),t.background.addEventListener("mouseup",n,!0)}}}}},mmwE:function(t,e){},rIwW:function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__fileicon_vue__=__webpack_require__("eijq"),__WEBPACK_IMPORTED_MODULE_1__address_vue__=__webpack_require__("dzvC"),__WEBPACK_IMPORTED_MODULE_2__js_utils__=__webpack_require__("mF0L"),__WEBPACK_IMPORTED_MODULE_3__js_apis_fileopts__=__webpack_require__("/u7W");__webpack_exports__.a={name:"fileselector",components:{fileAdress:__WEBPACK_IMPORTED_MODULE_1__address_vue__.a},props:["show-dailog","settings","start-path","select-muti","select-file","select-dir"],data:function(){var t=this;return{isShowDailog:!1,isSelectFile:!1,isSelectDir:!1,isSelectMuti:!1,fsStatus:{loadedPath:"",fsLoading:!0},fsSettings:{rootname:"/",width:680,height:450},fsColumns:[{title:"#",width:60,render:function(e,n){return e("checkbox",{props:{value:void 0!=n.row._checked&&n.row._checked},on:{"on-change":function(e){if(t.fsStatus.fsLoading=!0,!t.isSelectMuti)for(var i=0;i<t.fsData.length;i++)i!=n.index&&(t.fsData[i]._checked=!1);t.$set(t.fsData[n.index],"_checked",e),e?t.putSelect(n.row):t.removeSelect(n.row),t.fsStatus.fsLoading=!1}}})}},{title:"文件名称",key:"path",render:function(e,n){return e(__WEBPACK_IMPORTED_MODULE_0__fileicon_vue__.a,{props:{node:n.row,editMode:!1},on:{click:t.doOpenDir}})}},{title:"修改时间",key:"CtTime",width:180,render:function(t,e){return t("span",__WEBPACK_IMPORTED_MODULE_2__js_utils__.a.long2Time(e.row.CtTime))}}],fsData:[],selectedDates:[]}},created:function(){},methods:{init:function init(){this.setting&&(this.fsSettings.width=this.settings.width?this.settings.width:this.fsSettings.width,this.fsSettings.height=this.settings.height?this.settings.height:this.fsSettings.height),this.isSelectFile=!!this.selectFile&&this.selectFile,this.isSelectDir=!!this.selectDir&&this.selectDir,this.isSelectMuti=!!this.selectMuti&&eval(this.selectMuti),this.selectedDates=[],this.startPath&&this.startPath.length>0&&this.goToPath(this.startPath)},goToPath:function(t){this.fsStatus.loadedPath!=t&&(this.fsStatus.fsLoading=!0,this.fsStatus.loadedPath=t)},doOpenDir:function(t){t.isFile||this.goToPath(t.path)},onOk:function(){if(this.fsStatus.fsLoading=!0,this.fsData)for(var t=0;t<this.fsData.length;t++)this.fsData[t]._checked=!1;this.fsStatus.fsLoading=!1,this.$emit("on-select",this.selectedDates&&this.selectedDates.length>0?this.selectedDates:this.isSelectDir?[{path:this.fsStatus.loadedPath,isFile:!1}]:[])},onCancel:function(){this.$emit("on-cancel")},onRowClick:function(t,e){for(var n=0;n<this.fsData.length;n++)this.fsData[n]._checked&&e!=n&&this.$set(this.fsData[n],"_checked",!1);this.selectedDates=[t],this.$set(this.fsData[e],"_checked",!0)},putSelect:function(t){if(this.isSelectMuti){for(var e=0;e<this.selectedDates.length;e++)if(this.selectedDates[e].path==t.path)return;this.selectedDates.push(t)}else this.selectedDates=[t]},removeSelect:function(t){for(var e=this.selectedDates.length-1;e>=0;e--)this.selectedDates[e].path==t.path&&this.selectedDates.remove(e)},onSelectionChange:function(t,e){}},watch:{showDailog:function(t,e){t?this.init():this.fsStatus.loadedPath="",this.isShowDailog=t},"fsStatus.loadedPath":function(t,e){var n=this;t&&__WEBPACK_IMPORTED_MODULE_3__js_apis_fileopts__.a.List(t).then(function(t){n.fsData=[],n.selectedDates=[];for(var e=0;e<t.length;e++)(n.isSelectFile&&t[e].isFile||n.isSelectDir&&!t[e].isFile)&&(t[e]._checked=!1,n.fsData.push(t[e]));n.fsStatus.fsLoading=!1}).catch(function(t){n.fsStatus.fsLoading=!1,n.$Message.error(t.toString())})}}}},ucyG:function(t,e){},uvlh:function(t,e){},vCjF:function(t,e){},vRLG:function(t,e){},zIZW:function(t,e){!function(){"use strict";String.prototype.startWith=function(t){return!(null==t||""==t||0==this.length||t.length>this.length)&&this.substr(0,t.length)==t},String.prototype.endWith=function(t){return!(null==t||""==t||0==this.length||t.length>this.length)&&this.substring(this.length-t.length)==t},String.prototype.replaceStr=function(t,e){for(var n=this.split(t.toString()),i="",r=0;r<n.length;r++)i+=n[r],r!=n.length-1&&e&&(i+=e);return i},String.prototype.getPath=function(){var t=this.parsePath();if(null!=this&&""!=this){var e=this.lastIndexOf("/");e==this.length-1&&(t=this.substring(0,this.lastIndexOf("/")))}return t},String.prototype.parsePath=function(t){return t&&t.windows?this.replaceStr("//","/").replaceStr("/","\\"):this.replaceStr("\\","/").replaceStr("//","/")},String.prototype.getParent=function(){var t=this.getPath();return""==t?"/":""==(t=t.substring(0,t.lastIndexOf("/")))?"/":t},String.prototype.getName=function(t){var e=this.toString().getPath();return e=e.substring(e.lastIndexOf("/")+1),0==t&&-1!=e.lastIndexOf(".")&&(e=e.substring(0,e.lastIndexOf("."))),e},String.prototype.getSuffixed=function(t){var e=this.toString().getName();if(-1==e.lastIndexOf("."))return"";var n=e.lastIndexOf(".");return 0==t&&n++,e=e.substring(n)},String.prototype.getHost=function(){var t=this.toString();return t?(t.startWith("http://")?(t=t.substr(7)).endWith(":80")&&(t=t.substr(0,t.length-3)):t.startWith("https://")&&(t=t.substr(8)).endWith(":443")&&(t=t.substr(0,t.length-4)),t):""},String.prototype.getPort=function(){var t=this.lastIndexOf(":"),e=this.lastIndexOf("/");return e<t&&t>0&&t<this.length&&t>3&&e>5?this.substring(t+1):null},String.prototype.getServer=function(){var t=this.toString(),e=t.startWith("http://")?7:t.startWith("https://")?8:0,n=t.lastIndexOf(":")>7?t.lastIndexOf(":"):t.length;return t.substring(e,n)},String.prototype.getServerPath=function(){return this.replace(/^.*?\:\/\/[^\/]+/,"")},String.prototype.getStandardUrl=function(t){var e=this.toString();return e?(e.startWith("http://")||e.startWith("https://")||(e=(t||"http")+"://"+e),e.startWith("http://")&&e.lastIndexOf(":")<6?e+=":80":e.startWith("https://")&&e.lastIndexOf(":")<7&&(e+=":443"),e.toLowerCase()):""},String.prototype.getAbsolutePath=function(t){try{for(var e=t.getPath().getPath(),n=this.toString().split("/"),i=0,r="",o=0;o<n.length;o++)".."!=n[o]?"."!=n[o]&&(r+="/"+n[o]):i++;for(var a=0;a<i;a++)e=e.getParent();return(e+=r).getPath()}catch(e){return t}},Array.prototype.remove=function(t){if(isNaN(t)||t>this.length)return!1;for(var e=0,n=0;e<this.length;e++)this[e]!=this[t]&&(this[n++]=this[e]);this.length-=1}}()}},["NHnr"]);
//# sourceMappingURL=app.8a6b6c47d4608586df84.js.map